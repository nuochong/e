<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>我是如何将业务代码写优雅的 | 小窝</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/favicon/favicon.ico">
    <link rel="apple-touch-icon" href="/favicon/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#fff">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_1575342_kyqje1qgas8.css" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.11.0/baguetteBox.min.css" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/css/swiper.min.css" type="text/css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/animate.css/3.7.2/animate.min.css" type="text/css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mapbox-gl@1.7.0/dist/mapbox-gl.css" type="text/css">
    <link rel="stylesheet" href="https://www.zhangxinxu.com/study/201903/css-idea/cssgram.min.css" type="text/css">
    <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/js/swiper.min.js"></script>
    <script src="https://static.runoob.com/assets/qrcode/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/shakee93/vue-toasted@v1.1.27/dist/vue-toasted.min.js"></script>
    <script src="https://cdn.bootcss.com/wow/1.1.2/wow.min.js"></script>
    <script src="https://cdn.bootcss.com/velocity/2.0.5/velocity.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/locale/zh-cn.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mapbox-gl@1.7.0/dist/mapbox-gl.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mapbox/mapbox-gl-language@0.10.1/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/console-badge@1.3.0/dist/console-badge.umd.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/leancloud-storage@4.6.1/dist/av-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/exifreader@3.12.2/dist/exif-reader.min.js"></script>
    <link rel="alternate" type="application/rss+xml" href="https://luzhaoyang.com/rss.xml" title=" RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://luzhaoyang.com/feed.atom" title=" Atom Feed">
    <link rel="alternate" type="application/json" href="https://luzhaoyang.com/feed.json" title=" JSON Feed">
    <meta name="description" content="博客">
    <meta property="article:published_time" content="2020-08-30T04:01:00.000Z">
    <meta property="article:modified_time" content="2020-08-30T04:01:00.000Z">
    <meta property="og:title" content="我是如何将业务代码写优雅的">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://luzhaoyang.com/zh/posts/wo-shi-ru-he-jiang-ye-wu-dai-ma-xie-you-ya-de.html">
    <meta property="og:image" content="https://luzhaoyang.com/social/image-social-share-zh.png">
    <meta name="twitter:title" content="我是如何将业务代码写优雅的">
    <meta name="twitter:url" content="https://luzhaoyang.com/zh/posts/wo-shi-ru-he-jiang-ye-wu-dai-ma-xie-you-ya-de.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://luzhaoyang.com/social/image-social-share-zh.png">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="前端开发">
    <meta property="article:tag" content="前端开发">
    <meta name="theme-color" content="#fff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/favicon/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/styles.c0d4ff73.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/app.c0d4ff73.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/32.styles.17e01170.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/32.17e01170.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/5.styles.bb5d86e9.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/5.bb5d86e9.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/31.styles.5ca2e4f5.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/31.5ca2e4f5.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/30.styles.43033629.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/30.43033629.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/34.styles.e5e4abab.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/34.e5e4abab.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/0.styles.49cf876d.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/0.49cf876d.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/4.71a56bee.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/3.styles.2bb8aee7.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/3.2bb8aee7.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/9.styles.455551a7.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/9.455551a7.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/165.9e9cd5fb.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/6.styles.36a34110.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/6.36a34110.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/7.styles.1634930d.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/7.1634930d.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/1.styles.86583c0a.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/1.86583c0a.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/16.styles.c68e198c.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/16.c68e198c.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/33.styles.9f1171e0.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/33.9f1171e0.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/2.styles.61c5ae3f.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/2.61c5ae3f.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/36.styles.fe9212fe.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/36.fe9212fe.js" as="script"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/14.styles.bbc6e891.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/15.styles.1de0fd5e.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/17.styles.187303ae.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/18.styles.16b2aab3.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/19.styles.01493171.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/22.styles.16bf6952.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/23.styles.234a0a0a.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/24.styles.4b970b04.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/25.styles.2cf016fc.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/26.styles.70f33005.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/27.styles.6e81c588.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/28.styles.ff915a54.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/29.styles.b5511774.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/35.styles.2d172e23.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/8.styles.aa4ea806.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/10.551a808e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/100.9daad245.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/101.340245e0.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/102.e975c2aa.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/103.45981b93.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/104.558bdb4d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/105.5a098228.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/106.36e364a1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/107.af0a8258.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/108.ab2c4fc5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/109.2f9159e1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/110.07f573d5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/111.615c53fb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/112.9edc7ce0.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/113.1e67eeae.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/114.d32a3a69.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/115.ad1792b1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/116.a4161bce.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/117.0fdeb587.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/118.284c5641.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/119.a07da751.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/120.da06e242.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/121.cb7e5f92.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/122.806a2e41.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/123.4a924194.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/124.903b3dee.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/125.1762beda.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/126.ff7c40eb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/127.0701de3a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/128.c2007335.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/129.5bab1aa8.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/13.689ffc7b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/130.a4dd2f61.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/131.e2c30489.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/132.0ba6772e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/133.6957be78.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/134.c646a072.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/135.e48d8c87.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/136.291b78bd.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/137.58f8b255.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/138.dca72801.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/139.4f52bb53.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/14.bbc6e891.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/140.3d598266.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/141.f0fac5f0.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/142.e15a4a9b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/143.ad794965.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/144.7e01bf47.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/145.a0148fff.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/146.5fc09937.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/147.9f95b9ad.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/148.c7f45cbd.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/149.db55d6e7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/15.1de0fd5e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/150.177d7ffc.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/151.66b2b7b6.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/152.3728625c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/153.e01dc9b1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/154.5aa64ae9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/155.b9370222.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/156.ead44fbc.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/157.c61b1261.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/158.01cc0e01.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/159.1183f3df.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/160.f83c1189.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/161.23a4bbfb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/162.f6bcc6cb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/163.3ab7995d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/164.9845d1d9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/166.219a3043.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/167.5c3677cc.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/168.9502d4c7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/169.a190ca24.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/17.187303ae.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/170.2faab4f8.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/171.fdb4a5e8.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/172.e70c18b2.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/173.119003d5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/174.59d86c7e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/175.3c299b3d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/176.74c809d6.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/177.4be9a229.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/178.d9b3eefc.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/179.4b5a8f38.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/18.16b2aab3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/180.4da8c228.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/181.379eeba9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/182.68d641e5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/183.bf191b78.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/184.1327afba.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/19.01493171.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/20.a8878b5a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/21.217467bb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/22.16bf6952.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/23.234a0a0a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/24.4b970b04.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/25.2cf016fc.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/26.70f33005.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/27.6e81c588.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/28.ff915a54.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/29.b5511774.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/35.2d172e23.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/37.2c7b77ca.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/38.7e92e11e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/39.60e87367.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/40.0757bd92.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/41.d61f1778.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/42.eaafd8c7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/43.a9654c54.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/44.5b35fe6b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/45.dabf801e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/46.b425d288.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/47.3fcb2a9d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/48.3249536a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/49.7c45aff4.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/50.3715893f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/51.2f9ce194.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/52.abe870de.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/53.e237e2c5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/54.73b36c61.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/55.25eac6fa.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/56.c7b81357.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/57.3c57aba6.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/58.68c7d826.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/59.e31eb999.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/60.864d6806.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/61.c010f993.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/62.d11174de.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/63.8e6dbdb2.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/64.3ed2883a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/65.0728b298.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/66.0f2d9ec9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/67.cbfcbb97.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/68.0abcf207.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/69.fac1d4db.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/70.7c5ee5e4.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/71.2a809c90.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/72.eff71013.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/73.d1e0eecd.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/74.f37696a7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/75.d96c67ea.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/76.e8d2dcba.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/77.c46bd35d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/78.ac3dab07.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/79.252830d0.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/8.aa4ea806.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/80.6157aaff.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/81.a7e9e570.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/82.e60b0be6.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/83.dbdda00c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/84.f4af0c01.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/85.d963614e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/86.603527b6.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/87.c7992a55.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/88.e766118c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/89.0799fa5f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/90.6cb5482f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/91.615e7436.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/92.bb760b0f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/93.85299db7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/94.5ab1efb3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/95.6e16d816.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/96.d676734b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/97.4899cc02.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/98.546c9b5f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/99.e02baffc.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/vendors~flowchart.f4a11752.js">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/styles.c0d4ff73.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/32.styles.17e01170.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/5.styles.bb5d86e9.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/31.styles.5ca2e4f5.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/30.styles.43033629.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/34.styles.e5e4abab.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/0.styles.49cf876d.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/3.styles.2bb8aee7.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/9.styles.455551a7.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/6.styles.36a34110.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/7.styles.1634930d.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/1.styles.86583c0a.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/16.styles.c68e198c.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/33.styles.9f1171e0.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/2.styles.61c5ae3f.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/e/assets/css/36.styles.fe9212fe.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div itemscope="itemscope" itemtype="https://schema.org/WebPage" class="layout-main"><meta itemprop="name" content=""> <meta itemprop="alternateName" content=""> <meta itemprop="url" content="https://luzhaoyang.com"> <nav aria-label="Navigation" itemscope="itemscope" itemtype="https://schema.org/SiteNavigationElement" class="container nav-mobile not-black" style="display:none;"><span itemprop="headline" class="nav-mobile__title not-black">导航</span> <ul class="nav-mobile__list not-black"><li class="nav-mobile__item not-black"><a href="/zh/categories/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">文章分类</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/gallery/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">摄影相册</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/comments/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">我的留言</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/travel/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">旅行简记</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/about/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">关于我们</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/contact/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">联系我们</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/categories/backend.html" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">后端开发</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/categories/frontend.html" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">前端开发</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/categories/other.html" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">其它记录</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/categories/tour.html" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">旅行生活</span></a></li></ul></nav> <div class="container-fluid wrapper-body__nm"><header itemscope="itemscope" itemtype="https://schema.org/Organization" class="header"><!----> <div class="row header-top"><div class="column xs-33 sm-20"><div class="hamburguer header-top__hamburguer"><div class="hamburguer__wrapper"><span class="hamburguer__line"></span> <span class="hamburguer__line"></span> <span class="hamburguer__line"></span></div></div> <div class="languages header-top__languages"><div class="languages__box"><span class="languages__title meta-text">ZH</span> <span class="languages__icon"></span></div> <ul class="languages__list"><li class="languages__item"><a href="/" class="languages__link router-link-active">
        English
      </a></li><li class="languages__item"><a href="/zh/posts/wo-shi-ru-he-jiang-ye-wu-dai-ma-xie-you-ya-de.html" aria-current="page" class="languages__link router-link-exact-active router-link-active">
        Chinese
      </a></li></ul></div></div> <div class="column xs-33 sm-60"><div class="header__logo"><a href="/zh/" itemprop="url" class="header-top-logo__link router-link-active"><img itemprop="logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAyCAMAAAD7sXLbAAABDlBMVEUAAAA0SV00SFw0SF40SV40SF40SF0wQGA1SF2u6eau1dQ0SF01RVq+0tbfcZSuxsqwx8qtwcYzSF6y5d4wSGDpdJis3dmwztE1SV40SF2ntMCz4980R16tzs/TbpGov8Wxu8PDa4qtwcQ0SV3GaYqnu8Go0tKxv8avZII1SF2+ztS6z9XzeZ41SV6p7ubwdprki6ep6+Sx392r5+Ku5OBafok9Vmk5SV/EwcnNscDbmbF5qq/ohqTmc5eKXHh0WHJoVG670NOT0M2Gvr5ok5vWb5LLbY7AaYq1Z4erZIRGY3NuVnBDTGKg49y219eV0s+PyceMxsXJt8JwnaPUh6Lse51iiJKhYoBNbHtcUWoRJ6B1AAAALXRSTlMAwECA7+C/EJ8N828wH/3f1KBfNSD+9PPPsEwb8O7e27iUk4+BgH5sZmBTMBV50rNAAAABnUlEQVRIx42U51rCMBSGYymljAICMsS9V1paCihDEBFUcO/7vxEreTBtZt+ffd4m3zknCZiT06JQrSggHKkyRGhKKF1Fdtg/otCPXpDoEUgQiQl9FZKoSYGuQAZRfhnHkIlWkMUXlyH3oZpj+UuQj5YS+zR6TOLTvaV8CWVF4MtDyXXcKbmPOyXz6fFJ/O9R4544UwK/eW16PHQaTfxtV+B7OsJ+fvvfRuf6DdPP02IbhfJnk974awCHJoH9MvJ+qZB+68b6491kMex8xgn/0ppzYXLIE34a+U5If4D0msmDyHMniVMM1tvqIf+R5x8E/SnSuzw9QcxLEqdYRT6OI+pOfZl8baei7iQM6j7eIv+VszjpzyyES+vrBsA+cRbalO3s0+8DPgtXpL4ZByy/z67WPQQB9IU/Qf55UM/GOe/zD2u2iVXuez6ml3d3AE2STo+jMFDwPcTNwVEoCv7Rtql50kTxqD4cZNvZKuCSRNcQF2tnToGA2Fp/xZ8mYwAxRxaiVvfs0gmQsjdfv+t6SfIgDGfbG+maU9oy5Oov1sAUptGGixIAAAAASUVORK5CYII=" srcset="/logo/ktquez-play-logo.png 1x, /logo/ktquez-play-logo@2x.png 2x" alt="小窝"></a></div> <meta itemprop="name" content=""> </div> <div class="column xs-33 sm-20"><div class="search header-top__search"><!----> <span class="icon search__icon icon-search"></span></div> <div class="switch-bw header-top__toggle"><span class="switch-bw__text">
    开启夜间模式
  </span> <label for="switch-bw" class="switch-bw__label"><input type="checkbox" id="switch-bw" name="switch-bw" aria-labelledby="switch-bw-text" class="switch-bw__input"> <span class="switch-bw__ball"></span> <span id="switch-bw-text" hidden="hidden">switch to black or white</span></label></div></div></div></header> <main id="main" itemscope="itemscope" itemtype="https://schema.org/Blog" class="main-page"><div><a href="#main" class="vue-skip-to">跳到主要内容</a> <div><div class="page page__full row justify-right"><article itemscope="itemscope" itemprop="blogPost" itemtype="https://schema.org/BlogPosting" class="column xs-100 page__full__box box-default"><meta itemprop="mainEntityOfPage" content="/zh/posts/wo-shi-ru-he-jiang-ye-wu-dai-ma-xie-you-ya-de.html"> <header class="page-header page__full-header"><button type="button" class="ui-button reset-button back-button"><span class="icon back-button__icon icon--arrow icon-arrow"></span> <span class="back-button__text">返回</span></button> <div class="page-header__meta"><time datetime="Sun Aug 30 2020 12:01:00 GMT+0800 (GMT+08:00)" itemprop="datePublished" class="text">
            </time> <meta itemprop="dateModified" content="currentPost.updated_at"> <!----></div> <h1 itemprop="name headline" class="page-header__title">我是如何将业务代码写优雅的</h1> <div class="page-header-cat"><nav class="page-header-cat__nav"><ul class="page-header-cat__list"><li class="page-header-cat__item"><a href="/zh/categories/frontend.html" itemprop="keywords" class="page-header-cat__link meta-text">
                  前端开发
                </a></li></ul></nav></div> <!----> <div itemprop="author" itemscope="itemscope" itemtype="https://schema.org/Person" class="page-header__author"><strong>作者: </strong> <a href="/zh/authors/nuochong.html" rel="author" itemprop="url" class="link link--filler-s-primary"><span itemprop="name" class="not-black">诺冲</span></a></div></header> <!----> <!----> <section class="page-content page__full-content"><div class="row"><div class="column no-pad-l sm-50 post-share"><div class="observer" data-v-541be3fd><!----> <!----> <!----></div></div> <!----></div> <div class="row"><div class="column no-pad-l md-75 xl-67 post-content"><div class="post-content__box-player"><!----></div> <div class="post-content__excerpt"><!----></div> <div class="post-content__table-contents"><div class="table-contents"><h3 id="table-of-content" class="table-contents__title">目录</h3> <nav><ol class="table-contents__list"><li class="table-contents__item"><a href="#_0x00-前言" title="0x00 前言" class="table-contents__link"><span>0x00 前言</span></a></li><li class="table-contents__item"><a href="#_0x01-渐进式重构" title="0x01 渐进式重构" class="table-contents__link"><span>0x01 渐进式重构</span></a></li><li class="table-contents__item"><a href="#_0x02-高内聚低耦合" title="0x02 高内聚低耦合" class="table-contents__link"><span>0x02 高内聚低耦合</span></a></li><li class="table-contents__item"><a href="#_0x03-合理冗余" title="0x03 合理冗余" class="table-contents__link"><span>0x03 合理冗余</span></a></li><li class="table-contents__item"><a href="#_0x04-拒绝过度抽象" title="0x04 拒绝过度抽象" class="table-contents__link"><span>0x04 拒绝过度抽象</span></a></li><li class="table-contents__item"><a href="#_0x05-眼观六路" title="0x05 眼观六路" class="table-contents__link"><span>0x05 眼观六路</span></a></li><li class="table-contents__item"><a href="#_0x06-总结" title="0x06 总结" class="table-contents__link"><span>0x06 总结</span></a></li></ol></nav></div></div> <div itemprop="articleBody"><div class="content__default"><h2 id="_0x00-前言"><a href="#_0x00-前言" class="header-anchor">#</a> 0x00 前言</h2> <p>我是一名来自蚂蚁金服-保险事业群的前端工程师，在一线大厂的业务部门写代码，非常辛苦但也非常充实。业务代码不同于框架代码、个人项目或者开源项目，它的特点在于逻辑复杂、前后依赖多、可复用性差、迭代周期短，今天辛辛苦苦写的代码，上线运行一周可能就下线了。能熟练书写框架代码、构建底层基础设施的工程师不一定能写好业务代码。</p> <p>有人说，业务代码无非就是按部就班，优不优雅？who care？。但实际业务规则复杂得多，不是依葫芦画瓢就能轻松解决的，写一段糟糕的代码，可能要用双倍的时间去发现和解决问题，麻烦了自己、也难受了和你并肩作战的战友。</p> <p>有时候为了<strong>减少重复开发的成本，反复提炼和沉淀有复用价值的功能</strong>，就需要我们对业务代码进行合理抽象、甚至精雕细琢，要把业务代码写得优雅并非易事。我一直认为，程序设计和搬砖的最大区别在于<strong>设计</strong>二字，写代码也是一门艺术活。今天就借此机会，站在<strong>前端工程师的视角</strong>，给大家分享关于书写业务代码的最佳实践。</p> <h2 id="_0x01-渐进式重构"><a href="#_0x01-渐进式重构" class="header-anchor">#</a> 0x01 渐进式重构</h2> <p>渐进式重构是<strong>不断地</strong>对既有代码进行<strong>抽象、分离和组合</strong>。做代码重构之前需要回答两个问题：</p> <div class="language- extra-class"><pre class="language-text"><code>1、什么样的代码需要重构？
2、何时进行重构？
</code></pre></div><p>设计不是一蹴而就的，有时候写着写着才发现某些代码可以抽离出来单独使用，需要重构的代码需要满足几个条件：</p> <div class="language- extra-class"><pre class="language-text"><code>1、代码后期可复用
2、代码无副作用
3、代码逻辑单一
</code></pre></div><p>过早重构可能会因需求变化太快白白浪费许多时间；过晚重构会因为代码逻辑复杂、相似代码积压过多导致变更风险太高，难以维护。渐进式重构如下图所示（红色部分为增加的代码）：</p> <figure><img src="data:image/png;base64,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" alt=""><figcaption>章节配图</figcaption></figure> <p>首先我们在同一个源文件中新增功能，发现部分代码无副作用且可分离，因此在同一个文件中进行代码分割，形成许多功能单一的模块。如此往复后发现单文件的体积越来越大，此时就可以将功能相关联的模块抽出来放到单独的文件中统一管理，如 helpers、components、constants 等等。</p> <h2 id="_0x02-高内聚低耦合"><a href="#_0x02-高内聚低耦合" class="header-anchor">#</a> 0x02 高内聚低耦合</h2> <p>高内聚低耦合一直是软件设计领域里亘古不变的话题，重构的目标是提高代码的内聚性，降低各功能间的耦合程度，降低后期维护成本，特别是写业务代码，这一点相当重要。</p> <p>举个栗子，比如新需求希望在现有的产品页面上增加发红包功能，以吸引用户开通某个功能，按照正常逻辑，我需要：</p> <div class="language- extra-class"><pre class="language-text"><code>1、在当前页面中引入相关依赖
2、初始化，查询红包相关信息
3、用户点击时，触发红包发送
</code></pre></div><p>白色部分表示上个版本的代码，红色部分表示完成这个需求需要变更的代码：</p> <figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALwAAAB5BAMAAABxQlafAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAJ1BMVEUAAADn5+fm5ub93d314ODm5ubt4+P83d3/3Nz19fX7+/v+39/////dOOwFAAAABXRSTlMASeP7fVYvSggAAAABYktHRAyBs1FjAAAA+ElEQVRo3u2YMQrCQBBFo2DvEbTwBh4kCHoD8QZin8KgnaW9oPEC4ulSuezCmMwEplh97wCv2j/8/UUBAACQCaPFWsvmUPezTPXja6PlqbDXVaqfqO3NXaOv0aPPQO8cK+ejADCc8Dh34ls7bnUPdzWV9SFaL/ktv3Wxe8xkfTgMX6JyUsa6RI8+I71zrJyPAsAwOqqUUJ3MRamjCArFr7LqO2qsVFvRo/8JvXOsnI8CwDAMH/+IuVZvmC0iLlq9YXSJuKFHn7XeOVbORwHAzudRqvbnhL1lBVSt5wnnOGN9K6Bu+09IMlyiR5+R3jlWzkcBAADgf2kBgQW5UzWMlCsAAAAgdEVYdHNvZnR3YXJlAGh0dHBzOi8vaW1hZ2VtYWdpY2sub3JnvM8dnQAAABh0RVh0VGh1bWI6OkRvY3VtZW50OjpQYWdlcwAxp/+7LwAAABh0RVh0VGh1bWI6OkltYWdlOjpIZWlnaHQAMTIxOqD5JAAAABd0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAAxODgqYvlXAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADE1OTQyODc3MTbF2iwcAAAAEnRFWHRUaHVtYjo6U2l6ZQAxMjY1QkKISgcaAAAAQ3RFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vdG1wL2ltYWdlbGMvaW1ndmlldzJfN18xNTk0MDg5MDE3MzE4NzYyMl82MjJfWzBdYkrS1QAAAABJRU5ErkJggg==" alt=""><figcaption>章节配图</figcaption></figure> <p>这样一来，这个发红包功能就和以前的代码严重耦合，如果这是个只需要上线一周的临时需求，下线代码的时候就是一个高风险的动作；如果上线运行期间还需要对产品页面进行迭代，越往后就越搞不清楚谁是谁了。合理的设计应该是下面这个样子的：</p> <figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUsAAABUBAMAAAD5bghXAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAALVBMVEUAAAD14OD93d3m5ubn5+f/3Nz/3Nz/3Nz83d3t4+Pm5ub+39/7+/v19fX///8POwJlAAAAB3RSTlMAffvjSUnjfgWKHAAAAAFiS0dEDm+9ME8AAAE/SURBVGje7ZkxCsJAEEXnCOIJ7GwtbAXBC1ilTmcrFsbCg4hVwE7sbTyBrJUXEiFoAplkM7MuWfe/etl51f8wQ8Psw+54VnOaUz1J1s52SRzj0rObUfOYMHNWFppZymqWX+31mia3mMOyhiY0oQnN/msGEu+BlCUAIBYW+iB6M22akegjaOagfYwxz6YZTLyn9pZ0caN5b5rRuR6hCU1oQrPHmoHEeyBlCQCIgbZAOpQzZDMQzUj0YdQW79fK9yORZk28d4l2sihLeb99URYlNKEJTWj2SjOQeA+kLAEAMSBaJ7Bnv58hWs6wR9R6bG6WHEXCylZdeSdNqwswR+pNU2NZtD80oQnNGDR9xLuD3PRRlg5aCADw7/g4BJIkkKop5OOsSqJ4r+xufBypSVSWa2hCE5rQ7KVmIPEeRlm+AGJ+gGfwaQWHAAAAIHRFWHRzb2Z0d2FyZQBodHRwczovL2ltYWdlbWFnaWNrLm9yZ7zPHZ0AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAXdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADg0ImOECgAAABd0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAAzMzGzzkxWAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADE1OTQyODc3MTbF2iwcAAAAEnRFWHRUaHVtYjo6U2l6ZQAxNTI5QkK8ErU5AAAAQnRFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vdG1wL2ltYWdlbGMvaW1ndmlldzJfOF8xNTkyNDg0NjI1OTU3NzE1OF8zM19bMF0Zy2ouAAAAAElFTkSuQmCC" alt=""><figcaption>章节配图</figcaption></figure> <p>将和产品代码无关的功能性代码拆分出来，放到另一个文件中内部维护好整个生命周期状态，对外只暴露少量的接口或是方法，这样一来对产品页面的改造只需要：</p> <div class="language- extra-class"><pre class="language-text"><code>1、引入红包组件
2、用户点击时，调用红包组件的发奖方法
</code></pre></div><p>这样的变更是极小的、明确的、可控的。换句话说，<strong>整个红包功能是高内聚的，与产品代码是低耦合的</strong>。这样实践也带来另一个好处：我得到了一个<strong>可复用</strong>的红包组件！</p> <h2 id="_0x03-合理冗余"><a href="#_0x03-合理冗余" class="header-anchor">#</a> 0x03 合理冗余</h2> <p>业务需求是多变的，写出来的代码也是如此，频繁地抽象很可能导致过度设计，一个抽象很可能随着迭代次数的增多变得十分复杂。在存在多个变量的分支业务场景，比如同时包含活动是否过期、是否已参加活动、是否完成一次任务这样的情况，会存在多个嵌套 if-else 结构，这时将代码冗余设计是个不错的选择。下面举一个例子来说明什么是合理冗余：</p> <p>e.g. 有这样一个需求，一开始很简单，需要设计两个运营展位：</p> <figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAO4AAABZCAQAAACTKNBkAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAQSSURBVHja7d1daFZ1HAfwz6bmtE3Ll1a2jFRMKkJKqAwFCQSlgkjppkAzFLtxClIiEQYFCWJquFqCeNELdpGgZVqEUo4gLERU7OUi8yVfsKmJzqmnmycTN+K4PXDc//l9bs7/+T9nD//vvpzt7JwDI4QQQgghhBBCCCGEEEIIIYQQwo2oquNU85TLzVlD0QsrW8CD1bNnb67MlL077ni5eUrD8KJXWzYHGjY3u6syU1Z33DFLKDTDdX58VkLK6q58VOgZotyERbkJi3ITFuUmLMpNWJSbsN75dltongZnnC+97mUQdjgExtklK70zya1FZ+qy1FLmLHev8/jAv1e4hlmHpR5V7yutTrukyRzVxhedqBtSS5mj3GNW+8VKT1tgwTXv7XfMETRo0eaIwW4vOlEXpZgyR7k1HnDaaHX2XDVbbwheNMIafONJDxnnea8XnaiLUkyZo9wBbnNUjTpv4KATxuI5z7jTEn2c0ohRZnlBr6LzdFmKKXP9zl1mlI/d412tdmsx2wD1TphoIqgFl3v4qXd6KXOsdJ8+Rltqo1VawNc+xAWHHLbIYUfxt7rObg73GCmmzFHulxZhoGU+NQ1MtQnD7DPZUPd7XKNdHrHM8qLzdFmKKXP8WJ6jP/jchNLobn85ZaA9vtfuB5lvbbPeem952M1FZ+qSFFPmKLd/abvBHFwAk20xXo29TphrsD9s08d8d2jrEbErI2XOixjQpK+5vrAUCw3wnpdNd59ntcqs0BuXnDOz6EzdknjKpqyj37K2LMuy7Ex29spce9Z+zV6XskvZjacpq9SUOY/cEaVt7f9+ac/5I6EyUvaclYbrFuUmLMpNWJSbsCg3YVFuwqLchEW5CbuOcs863GHu6JWHyVKRUsrruLa803avlcZtNoKNhngMPKVv0VnKIqWUucp9VRt+d9xJ3ORtrVab47ipOG6Q901QX3SWbkovZa5yW6xFs6kmYQZqzfWzXy2XecWDFqorOkm3pZcyV7k1RmK3QUaiH85rNt9MM7RbY6/VJhWdpNvSS5n7hGqHQU74qPRqsE3OWWKNFWY46RM1RScpi7RS5jyh+kmjzwwzzVDwo3luMcsOvOQdK60ytugs3ZZaypxH7nYbNKi2TisYY6tTLmrXrspFW40pOkkZpJYy55HbWNrWmW5l6YmjWk+UZtfqV3SOskgtZa5y/3tS903fubc0/tPi0mh/0SnKIr2UucrdcmW0+KrZnVe+HVmeD7nhpZeyG9eWqzoZpacnp4wbBwmLchMW5SYsyk1YlJuwKDdhUW7CotyERbkJi3ITFuUmLMpNWJSbsE7KrTp4oOhVldEBVQc7m6+ElJ3cz62evTmxf6fU2XxlpAwhhBBCCCGEEEIIIYQQQggh9GD/AE6aENklAAPfAAAAIHRFWHRzb2Z0d2FyZQBodHRwczovL2ltYWdlbWFnaWNrLm9yZ7zPHZ0AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAXdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADg5XNL4twAAABd0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAAyMzjL0J7FAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADE1OTQyODc3MTey3RyKAAAAEnRFWHRUaHVtYjo6U2l6ZQAyMzE5QkKnc53ZAAAAQnRFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vdG1wL2ltYWdlbGMvaW1ndmlldzJfNl8xNTk0MjY0NDIzMzE0NDI4Nl80OF9bMF36TBugAAAAAElFTkSuQmCC" alt=""><figcaption>章节配图</figcaption></figure> <p>那么抽象一个组件：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Item</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> content <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>现在需求要求在第一个展位的标题上增加热文标记：</p> <figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAO0AAABSCAMAAACPD6MdAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACeVBMVEUAAACampqYmJiXl5fh4eH/////6+v/6en/uLj/sLD/wMD/2tp0dHTj4+Py8vLq6urt7e3ExMSpqand3d2urq6tra3u7u7/4uL/4+P/6ur/zs7/8PD/7e3/ior/7u5KSkrb29uNjY1EREReXl5OTk6GhoadnZ1YWFiZmZmLi4uIiIgfHx/n5+f/c3P/nZ3/g4P/oKD/wsL/aWn/pKT/ZWX/19f/ycn/bW3p6el/f38lJSVtbW27u7tfX19wcHA/Pz+np6cYGBiAgID/jY3//Pz/Z2f/dXX/+fn/5ub/iYn/mZn/0NDx8fGrq6sXFxeTk5PIyMjU1NTr6+vBwcFlZWWxsbGfn5/T09MvLy//aGj//f3/a2sAAACbm5vV1dVXV1c7OzsnJydpaWlCQkJHR0c4ODioqKj8/PwyMjL/fHz/7+//2dn/k5P/m5v/z88kJCS8vLza2tro6Oi0tLQ2Njb+/v7/1dX/YGD/hIT/5OT/zMz/zc3W1tZTU1PMzMxvb29+fn6hoaGWlpbl5eWMjIwgICDJyclDQ0P//v6Ojo4pKSn19fXg4OBBQUFjY2M1NTW4uLjY2Niampp6enpmZmYwMDDw8PCDg4O3t7c6Ojrk5OT09PRhYWF2dnZAQEBxcXEcHBzs7Oz6+vr4+PhoaGgeHh75+fmRkZGqqqouLi4rKyssLCyenp7z8/P7+/v9/f339/eCgoJycnJ3d3dRUVE8PDw9PT3c3NyEhIRgYGDv7++2trZFRUVJSUm1tbVPT0/m5uZSUlJbW1ulpaWsrKxGRkbOzs40NDS6urrNzc1MTEyvr6+wsLDPz8+Pj4/29vZISEgxMTEjIyPyaWAUAAAAA3RSTlMASePizoNQAAAAAWJLR0QF+G/pxwAAAzBJREFUeNrt22lTUmEYh3EV79JCUQQqy1hEM8sWs8UspH09aYBpC1qo2J6Ztmelthhp5VKpWalltGmLiJW222pZfaKGRqw8yDh1ngdH7/+LwxmGmYvfDIflBW5uOBwOh8PhcDgcrte5e/BozMPdpUn7PDyBxjw9XJq0j0elDMBzaRK1qEUtageSdsjQwaT18v59Pmz4QNDyfcBXIBAI/AD8hUJhgEgsFosldu2IkQAwKnA0jAnyGsuV1lmSsFYqA7lCoVAEAyhDQseFjQ+fEBI+sUsbMWnyFJgaOS1q+oyZQYFcaZ0liWpnRc+OmWN/nHKuKjZMHTMvZn7XHV4LYOEiWLwEli6D5Sv+M923JFHtSmZVXPzqX9OAUusTHaZLWJOYZNd6A6xdtx4AIrnTOk8S1YJ2gz45JWXjppQUERhS09KNuuT0jM1/amHLVti2HXbs5EjrPElWq9yVmqmRifi7s0CjVqvVe3TJ2Tl/a/fu2x91AA5GHOJI6zRJVHv4iDT36LHjIn6eHPIL5CfkobqTp6BH+vS/vBv3qu1Tkoy2MFcqyzhjEvHPFgEUJ547fyG5pLRASyLtgmTPtAmksoQyEPGh/CKk68svXS6tqCxMqyKopZh09OF3JR6MfKgW+ly9dr0GSmoB1H4EtRSTjtJ1cOOmETT1t8ygj026fScp6e49wlpKSXY6oB7gvsl21tDQdVdjI1dlx1pqSXaa7PrbrwLUoha1qEUtalFLQ1uVbz/LekBJSynpKK19aDvWMQwT/IhhmDoKWkpJVvqxStVkUamqIavIGGc05hmLskhr6SVZ6WartVpvtVqgytzy5KlEF/fMRFpLL8lKtwK0hdtuahTP819IX2a+4vRC4rk06SDt/5r/xvYM6t6WaWTt5louy71oaSXZ6XfvfRqbPrTCR8unzx0d5grLF+Jaakl2+mslgK+5FUydzQzDMNmd5F/J1JKOLiLbLADQJpFIJFIuw71et5SSrHS77dDyrRgAvhsMBsMP8lp6SWdf43K6D2S19JLO0iTW/74noxa1qEUtalGLWtSiFrWoHYzawfUPmcH17yccDofD4XA4HA7XvZ/eZAx97UunVQAAACB0RVh0c29mdHdhcmUAaHR0cHM6Ly9pbWFnZW1hZ2ljay5vcme8zx2dAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAF3RFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAA4MssAIT8AAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgAMjM3W2+DVAAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTk0Mjg3NzE4ImIBGwAAABJ0RVh0VGh1bWI6OlNpemUAMjU4MUJCWyh2SwAAAEJ0RVh0VGh1bWI6OlVSSQBmaWxlOi8vL3RtcC9pbWFnZWxjL2ltZ3ZpZXcyXzdfMTU5NDA5MDgxOTQwNTA2MTFfNjNfWzBdQsXoTAAAAABJRU5ErkJggg==" alt=""><figcaption>章节配图</figcaption></figure> <p>也很容易：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Item</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> content <span class="token punctuation">}</span><span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>title<span class="token punctuation">}</span>
      <span class="token punctuation">{</span>index <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>hot<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>需求又变了，要求：在第一个展位去掉内容，并且在下方加个按钮；第二个展位的标题右边增加一个超链接以及增加一个副标题：</p> <figure><img src="data:image/png;base64,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" alt=""><figcaption>章节配图</figcaption></figure> <p>这下有点恶心了：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Item</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> content <span class="token punctuation">}</span><span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>title<span class="token punctuation">}</span>
      <span class="token punctuation">{</span>index <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>hot<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token punctuation">}</span>
      <span class="token punctuation">{</span>index <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;xxx&quot;</span><span class="token operator">&gt;</span>去看看<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>index <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>h5<span class="token operator">&gt;</span>副标题<span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">&gt;</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>index <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> content<span class="token punctuation">}</span>
      <span class="token punctuation">{</span>index <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>领福利<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>可以看到，之前抽象的好好的，现在需求一变，代码就面目全非了，中间混杂着两个状态（第一个、第二个）的判断逻辑。实际情况很可能比这个更复杂，在多状态交织逻辑难以通过一套代码表达清楚时，进行合理冗余就是个不错的选择，将上面的例子用两个 if 重写如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 第一个展位</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span>标题一<span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>hot<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>领福利<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 第二个展位</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span>标题二<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;xxx&quot;</span><span class="token operator">&gt;</span>去看看<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h5<span class="token operator">&gt;</span>副标题<span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>内容<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>合理冗余其实也是一种重构</strong>，根据业务逻辑和代码规模，做相似抽象还是代码冗余，这其实也是渐进式重构的一种体现。无论采用何种方式，只要能把业务逻辑表达清楚，让代码始终保持良好的可读性和可维护性，就 OK。</p> <p>下面介绍一个过度抽象的例子。</p> <h2 id="_0x04-拒绝过度抽象"><a href="#_0x04-拒绝过度抽象" class="header-anchor">#</a> 0x04 拒绝过度抽象</h2> <p>在 JavaScript 代码中进行深度抽象有时并非好事，有 OOP（面向对象编程）背景的同学很容易先入为主设计：所有数据结构都想封装成一个类 （Class） 。实际上 Class 在 JavaScript 中是个不好的设计，它并非真正的类。几年前，我曾看到一位 Java 转前端的同学写出了类似这样的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">DataItem</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">DataCollection</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">insert</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> item1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataItem</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'name1'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> item2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataItem</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'name2'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>item1<span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>item2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>一股浓浓的 Java 味道扑面而来。上面的代码并没有发挥出 JavaScript 的语言优势，也增加了不少理解成本，如果用面向对象编程的思路去写前端代码，特别是业务代码，可真是一场噩梦。正确的写法如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'name1'</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'name2'</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>由于 JS 属于弱类型语言，弱类型语言就要发挥弱类型的优势，无需过多类型定义和 Class 抽象，用最原始的 object 和 function 足以胜任从简单到复杂的业务场景。这里特别想提及前端所熟知的 Redux 状态管理器，Redux 中，state 就是普通的 object，reducer 就是普通的 function，action 也是普通的 object，不加任何类型约束。因为简单，所以强大。</p> <h2 id="_0x05-眼观六路"><a href="#_0x05-眼观六路" class="header-anchor">#</a> 0x05 眼观六路</h2> <p>用弱类型语言编程意味着无需编译，无需编译的语言天生存在一个问题是在运行前缺少必要的类型检查，将问题暴露在运行时往往会导致非常严重的故障。这就要求开发者能在写代码的阶段严格保证代码质量，特别是写业务代码。</p> <p>集成开发环境（IDE）对 JavaScript 代码的智能提示能力有限，很多时候不能通过 IDE 查找某个变量或者函数的所有引用，这时就要善用 Ctrl + F 进行全局查找来保证自己的单点变更不会影响到其他地方。如果使用 TypeScript，在类型检查、引用查找上的帮助会更好。</p> <h2 id="_0x06-总结"><a href="#_0x06-总结" class="header-anchor">#</a> 0x06 总结</h2> <p>今天给大家分享了关于书写业务代码的一些实践经验：对代码进行<strong>渐进式重构</strong>是提升代码健壮性的有力武器；设计<strong>高内聚低耦合</strong>的代码可以让你在做需求的过程中沉淀出一套通用解决方案；<strong>合理冗余</strong>可以简化复杂的场景，让开发变得高效、测试变得容易；<strong>拒绝过度抽象</strong>，拥抱简单，灵活变化。保持 <strong>眼观六路</strong> 的好习惯能让代码质量提升一个台阶。</p> <p>最后，希望大家能在实际开发过程中去体会和学习，不断思考和总结，将业务代码写优雅，是个很大的挑战</p> <p><a href="https://mp.weixin.qq.com/s/klVZubMtkZHJN733p1HZmg" target="_blank" rel="noopener noreferrer">我是如何将业务代码写优雅的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div></div> <div id="shangfang" class="column no-pad-r sm-25 xl-33 xsNone smNone post-sidebar"><div class="ads-container"><!----></div> <!----> <div id="zhongjian"><div class="table-contents-fixed"><h3 id="table-of-content" class="table-contents__title">浮动目录</h3> <nav><ol class="table-contents__list"></ol></nav></div></div></div> <aside id="dibujuli" class="column xs-100"><hr class="divider"> <div><div class="observer" data-v-541be3fd><!----> <!----> <!----></div></div> <hr class="divider"> <section class="post-content__disqus"><Vssue name="我是如何将业务代码写优雅的"></Vssue></section></aside></div></section></article></div> <section class="row section-newsletter justify-center newsletter-post-wrap"><div class="column sm-100 md-67 xl-50"><div class="newsletter not-black"><span class="meta-text meta-text--primary not-black">关注我们</span> <h2 class="newsletter__title not-black">在收件箱接收新的内容推送</h2> <form method="post" action="https://luzhaoyang.us4.list-manage.com/subscribe/post?u=1de83ba90307cf0e38650d622&amp;amp;id=04aeba270a" class="newsletter__form not-black"><label for="email_news-1604729158284" class="newsletter__label not-black"><input type="email" name="EMAIL" id="email_news-1604729158284" required="required" placeholder="在这里输入您的电子邮件" autocomplete="off" aria-label="在这里输入您的电子邮件" value="" class="ui-input-field reset-input newsletter__input"></label> <button type="submit" class="ui-button reset-button newsletter__button txt-upper ui-button--primary">
        订阅
      </button></form></div></div></section> <aside class="container main"></aside></div> <!----> <div><div class="elevator"><a class="elevator__link"><span class="icon elevator__icon icon-greaterthan"></span> <!----></a> <!----></div> <div class="mask-container"><div class="mask-wrap"><div class="circle-wrapper"><svg xmlns="http://www.w3.org/200/svg" height="100%" width="100%"><circle cx="66" cy="66" r="55" fill="none" stroke="#FF4437" stroke-width="5" stroke-linecap="round" class="circle-full"></circle> <circle cx="66" cy="66" r="55" fill="none" stroke-width="5" stroke-linecap="round" stroke="#FF4437" stroke-dasharray="0,10000" class="circle-detail"></circle></svg> <img class="mobile-bgm-img coupon-num had-percent"></div> <div></div> <div></div> <div class="mobile-bgm-list"><i class="reco-bgm reco-bgm-last last mobile-bgm-btn"></i> <i class="reco-bgm reco-bgm-pause pause mobile-bgm-btn" style="display:none;"></i> <i class="reco-bgm reco-bgm-play play mobile-bgm-btn" style="display:;"></i> <i class="reco-bgm reco-bgm-next next mobile-bgm-btn"></i></div> <div class="mobile-bgm-close"><i class="iconfont iconLogonClosed mobile-bgm-btn"></i></div></div></div></div> <!----></div></main> <footer id="footer" class="footer "><div class="footer-box1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1366 161" class="footer-box__shape"><path d="M-11.925-4809v-154.746c40.454,19.75,273.683,130.936,420.544,142.612,161.25,12.821,339.978-42.709,521.543-86.3,169.82-40.769,395.43,29.2,423.912,38.429v60Z" transform="translate(11.926 4970)"></path></svg></div> <div class="footer-box2"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1366 246" class="footer-box__shape"><path d="M-1505.5-4725.5v-238.1c8.149-3.133,18.138-5.059,29.672-5.9h30.954c201.21,11.667,696.6,224.535,855.572,236.458,205.129,15.385,287.179-164.1,432.047-175.625a42.381,42.381,0,0,1,16.756,1.857V-4725.5Z" transform="translate(1506 4971)"></path></svg> <ul class="footer-social__list"></ul> <div class="footer-newsletter not-black"><div class="newsletter not-black"><span class="meta-text meta-text--primary not-black">关注我们</span> <h2 class="newsletter__title not-black">在收件箱接收新的内容推送</h2> <form method="post" action="https://luzhaoyang.us4.list-manage.com/subscribe/post?u=1de83ba90307cf0e38650d622&amp;amp;id=04aeba270a" class="newsletter__form not-black"><label for="email_news-1604729158286" class="newsletter__label not-black"><input type="email" name="EMAIL" id="email_news-1604729158286" required="required" placeholder="在这里输入您的电子邮件" autocomplete="off" aria-label="在这里输入您的电子邮件" value="" class="ui-input-field reset-input newsletter__input"></label> <button type="submit" class="ui-button reset-button newsletter__button txt-upper ui-button--primary">
        订阅
      </button></form></div></div></div> <section class="footer-box3"><div class="row"><div class="column sm-50 footer-card"><div class="observer" data-v-541be3fd><div class="spinner observer__spinner" data-v-541be3fd><div class="double-bounce1"></div> <div class="double-bounce2"></div></div> <!----> <!----></div></div> <div class="column sm-50 footer-nav"><div class="row justify-right"><div class="column xs-50 sm-40 md-33 footer-nav__box footer-nav__box--1 not-black"><h2 class="meta-text title not-black">我的小窝</h2> <nav class="footer-nav1"><ul><li class="footer-nav1__item"><a href="/zh/categories/" class="not-black">文章分类</a> <!----></li><li class="footer-nav1__item"><a href="/zh/gallery/" class="not-black">摄影相册</a> <!----></li><!----><li class="footer-nav1__item"><a href="/zh/travel/" class="not-black">旅行简记</a> <!----></li><li class="footer-nav1__item"><a href="/zh/about/" class="not-black">关于我们</a> <!----></li><li class="footer-nav1__item"><a href="/zh/contact/" class="not-black">联系我们</a> <!----></li></ul></nav></div> <div class="column xs-50 sm-40 md-33 footer-nav__box footer-nav__box--2"><h2 class="meta-text title not-black">社区</h2> <nav class="footer-nav2"><ul><li class="footer-nav2__item"><!----> <a href="https://jq.qq.com/?_wv=1027&amp;k=5sOoWzp" rel="noopener nofollow" target="_blank" class="not-black">Q群 931024509</a></li><li class="footer-nav2__item"><!----> <a href="https://nativescript-vue-examples.luzhaoyang.com/" rel="noopener nofollow" target="_blank" class="not-black">NSVue 示例</a></li><li class="footer-nav2__item"><!----> <a href="https://marketplace.visualstudio.com/items?itemName=nuochong.nativescript-vue-extend" rel="noopener nofollow" target="_blank" class="not-black">NSVue 扩展</a></li><li class="footer-nav2__item"><!----> <a href="https://luzhaoyang.com/vue-auto-complete/" rel="noopener nofollow" target="_blank" class="not-black">Vue Auto Complete</a></li></ul></nav></div></div></div> <div class="cpolumn sm-100 footer-copy"><p class="visitors-total" data-v-504ab208><span data-v-504ab208>累计访问</span> <span data-v-504ab208></span> <span data-v-504ab208>次</span></p> <p class="footer-copy-last">2018 - 2020 © NUOCHONG - 源于 
  <a href="https://github.com/" rel="noopener" target="_blank">
    GITHUB
  </a></p></div></div> <span class="shapes shapes--circle" style="left: 3%; top: -20%"></span> <span class="shapes shapes--primary shapes--color3" style="left: 30%; top: -15%"></span> <span class="shapes shapes--primary" style="left: 13%; top: -80%; transform: rotate(45deg)"></span> <span class="shapes shapes--circle shapes--color4" style="left: 40%; top: 200px"></span> <span class="shapes shapes--primary" style="left: 15%; bottom: 10%; transform: rotate(75deg)"></span> <span class="shapes shapes--circle shapes--color3" style="right: 50%; top: 30%"></span> <span class="shapes shapes--primary" style="right: 20%; top: -100%"></span> <span class="shapes shapes--circle" style="right: 10%; top: -20%"></span> <span class="shapes shapes--color4" style="right: 35%; top: -20%; transform: rotate(45deg)"></span> <span class="shapes shapes--circle" style="left: 40%; top: -50%"></span> <span class="shapes shapes--color3" style="right: 30%; top: 20%"></span> <span class="shapes shapes--circle shapes--primary" style="right: 30%; bottom: 20%"></span></section></footer></div> <!----> <!----></div><div class="global-ui"><div><!----> <!----></div><!----></div></div>
    <script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/app.c0d4ff73.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/32.17e01170.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/5.bb5d86e9.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/31.5ca2e4f5.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/30.43033629.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/34.e5e4abab.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/0.49cf876d.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/4.71a56bee.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/3.2bb8aee7.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/9.455551a7.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/165.9e9cd5fb.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/6.36a34110.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/7.1634930d.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/1.86583c0a.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/16.c68e198c.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/33.9f1171e0.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/2.61c5ae3f.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/e/assets/js/36.fe9212fe.js" defer></script>
  </body>
</html>
