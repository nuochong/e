<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>如何让你的JS写得更漂亮 | 小窝</title>
    <meta name="description" content="博客">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/favicon/favicon.ico">
  <meta name="theme-color" content="#fff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/favicon/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#fff">
  <meta name="msapplication-TileImage" content="/favicon/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
  <link rel="stylesheet" href="https://at.alicdn.com/t/font_1575342_gu630lpigw.css" type="text/css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.11.0/baguetteBox.min.css" type="text/css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/css/swiper.min.css" type="text/css">
  <link rel="stylesheet" href="https://cdn.bootcss.com/animate.css/3.7.2/animate.min.css" type="text/css">
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/v1.7.0/mapbox-gl.css" type="text/css">
  <link rel="stylesheet" href="https://www.zhangxinxu.com/study/201903/css-idea/cssgram.min.css" type="text/css">
  <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.firebase.com/js/client/2.0.4/firebase.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.1/js/swiper.min.js"></script>
  <script src="https://static.runoob.com/assets/qrcode/qrcode.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/shakee93/vue-toasted@v1.1.27/dist/vue-toasted.min.js"></script>
  <script src="https://cdn.bootcss.com/wow/1.1.2/wow.min.js"></script>
  <script src="https://cdn.bootcss.com/velocity/2.0.5/velocity.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/locale/zh-cn.js"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/v1.7.0/mapbox-gl.js"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-language/v0.10.1/mapbox-gl-language.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/console-badge@1.3.0/dist/console-badge.umd.min.js"></script>
  <link rel="alternate" type="application/rss+xml" href="https://luzhaoyang.com/rss.xml" title=" RSS Feed">
  <link rel="alternate" type="application/atom+xml" href="https://luzhaoyang.com/feed.atom" title=" Atom Feed">
  <link rel="alternate" type="application/json" href="https://luzhaoyang.com/feed.json" title=" JSON Feed">
    <meta property="article:published_time" content="Sun May 12 2019 11:11:00 GMT+0800 (GMT+08:00)"><meta property="article:modified_time" content="Sun May 12 2019 11:11:00 GMT+0800 (GMT+08:00)"><meta property="og:title" content="如何让你的JS写得更漂亮"><meta property="og:type" content="website"><meta property="og:url" content="https://luzhaoyang.com/zh/posts/ru-he-rang-ni-dejs-xie-de-geng-piao-liang.html"><meta property="og:image" content="https://luzhaoyang.com/social/image-social-share-zh.png"><meta name="twitter:title" content="如何让你的JS写得更漂亮"><meta name="twitter:url" content="https://luzhaoyang.com/zh/posts/ru-he-rang-ni-dejs-xie-de-geng-piao-liang.html"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://luzhaoyang.com/social/image-social-share-zh.png"><meta name="twitter:label2" content="Filed under"><meta name="twitter:data2" content="前端开发"><meta property="article:tag" content="前端开发">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/styles.8bf9a8f2.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/app.8bf9a8f2.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/20.styles.236149f9.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/20.236149f9.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/4.styles.53596af9.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/4.53596af9.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/19.styles.a391d301.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/19.a391d301.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/18.styles.bab59606.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/18.bab59606.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/26.styles.16fe9f1a.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/26.16fe9f1a.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/0.styles.349e4165.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/0.349e4165.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/5.560bdd87.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/3.styles.2b37585b.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/3.2b37585b.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/23.styles.4f0f3eab.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/23.4f0f3eab.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/120.8fd77ff5.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/6.styles.e048774a.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/6.e048774a.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/13.styles.dcd66a11.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/13.dcd66a11.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/1.styles.763ffe07.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/1.763ffe07.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/11.styles.8eaf56aa.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/11.8eaf56aa.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/21.styles.d8a9dfb2.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/21.d8a9dfb2.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/2.styles.a5d7b28c.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/2.a5d7b28c.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/27.styles.96a2bbc6.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/27.96a2bbc6.js" as="script"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/10.styles.3dc8dc79.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/12.styles.f2c3b8ba.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/14.styles.cbe5a073.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/15.styles.e830f9b4.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/16.styles.7bfba208.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/17.styles.3014d512.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/22.styles.4b21f4b6.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/24.styles.02d33a34.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/25.styles.6e4d7e41.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/31.styles.0070bd9d.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/7.styles.cbbacd5e.css"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/10.3dc8dc79.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/100.bed158c0.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/101.5d7706a9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/102.569d81bf.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/103.149de099.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/104.e535adec.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/105.3153a0c3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/106.1d6f5a1c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/107.ce9e4feb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/108.b24191ec.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/109.ead6aaca.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/110.7060364e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/111.f72187f5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/112.70484402.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/113.8b6ff299.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/114.2211dd2b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/115.07febc5b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/116.7e3e7071.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/117.7c9eedeb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/118.e98c5807.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/119.d5c6171a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/12.f2c3b8ba.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/121.62901d48.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/122.7098621c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/123.e82884a5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/124.bf9a5c82.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/125.7c258298.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/126.c549f1f1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/127.37a19fa8.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/128.7f0101f2.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/129.80228d32.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/130.3b085807.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/131.39ce3ce5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/132.bc37516c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/133.4865d20f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/134.469174bd.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/135.74272cd6.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/136.f424fb98.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/137.f58fa0e9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/138.c74fcc6a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/139.fcf3187d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/14.cbe5a073.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/140.51ba7eb5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/141.5c4a3e35.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/142.d74bac75.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/143.81128bcb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/144.07536ac5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/145.975c3c70.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/146.fdea6968.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/147.a4c7911f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/148.f1310eb0.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/149.79069a56.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/15.e830f9b4.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/150.bdd9f6f5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/16.7bfba208.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/17.3014d512.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/22.4b21f4b6.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/24.02d33a34.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/25.6e4d7e41.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/28.c6b813b5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/29.a3d62419.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/30.cb657cf6.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/31.0070bd9d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/32.3e36346f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/33.fa197849.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/34.2babe663.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/35.a7fe21e2.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/36.af87f7c3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/37.2311da58.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/38.9f3062a1.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/39.31a57596.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/40.68faf64c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/41.d010642b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/42.7ea03631.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/43.93d96507.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/44.03688ba3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/45.07b46d1b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/46.0ad228ac.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/47.7d646027.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/48.5ba44303.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/49.db5d9943.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/50.47d4f783.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/51.3f43afa8.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/52.15e400d3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/53.31bb7c0e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/54.dba28d32.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/55.cd8aebee.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/56.aa5b6a65.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/57.fc3ad074.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/58.f67ff106.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/59.6058987f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/60.06848b4c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/61.f2fd5c67.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/62.649eb42d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/63.416c4b11.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/64.b3247629.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/65.182d1435.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/66.db906599.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/67.464cbed0.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/68.cfd5ebbe.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/69.4af91470.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/7.cbbacd5e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/70.52997155.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/71.24f3057f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/72.68a234d7.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/73.fb589869.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/74.1267d979.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/75.30195fc9.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/76.655f3f7f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/77.6addbe04.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/78.11550bcb.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/79.5b9bdafe.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/80.d77621e8.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/81.fff42054.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/82.a51fd06c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/83.362e781b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/84.a284fb0f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/85.8ae6f090.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/86.512f5a1e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/87.c5322d7b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/88.999b8050.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/89.1b5fd823.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/90.e1aa6699.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/91.4d8e2b05.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/92.eeac8643.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/93.366c70a2.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/94.77944208.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/95.ffae2c5c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/96.4c502652.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/97.862e0a7c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/98.05eb32c5.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/99.ba789943.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/vendors~flowchart.310f6888.js">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/styles.8bf9a8f2.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/20.styles.236149f9.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/4.styles.53596af9.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/19.styles.a391d301.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/18.styles.bab59606.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/26.styles.16fe9f1a.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/0.styles.349e4165.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/3.styles.2b37585b.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/23.styles.4f0f3eab.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/6.styles.e048774a.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/13.styles.dcd66a11.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/1.styles.763ffe07.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/11.styles.8eaf56aa.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/21.styles.d8a9dfb2.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/2.styles.a5d7b28c.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/css/27.styles.96a2bbc6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div itemscope="itemscope" itemtype="https://schema.org/WebPage" class="layout-main"><meta itemprop="name" content=""> <meta itemprop="alternateName" content=""> <meta itemprop="url" content="https://luzhaoyang.com"> <nav aria-label="Navigation" itemscope="itemscope" itemtype="https://schema.org/SiteNavigationElement" class="container nav-mobile not-black" style="display:none;"><span itemprop="headline" class="nav-mobile__title not-black">导航</span> <ul class="nav-mobile__list not-black"><li class="nav-mobile__item not-black"><a href="/zh/categories/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">文章分类</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/gallery/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">摄影相册</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/comments/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">我的留言</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/travel/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">旅行简记</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/about/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">关于我们</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/contact/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">联系我们</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/categories/backend.html" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">后端开发</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/categories/frontend.html" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">前端开发</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/categories/other.html" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">其他记录</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/categories/travel.html" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--normal"></span> <span class="text not-black">旅行生活</span></a></li></ul></nav> <div class="container-fluid wrapper-body__nm"><header itemscope="itemscope" itemtype="https://schema.org/Organization" class="header"><!----> <div class="row header-top"><div class="column xs-33 sm-20"><div class="hamburguer header-top__hamburguer"><div class="hamburguer__wrapper"><span class="hamburguer__line"></span> <span class="hamburguer__line"></span> <span class="hamburguer__line"></span></div></div> <div class="languages header-top__languages"><div class="languages__box"><span class="languages__title meta-text">ZH</span> <span class="languages__icon"></span></div> <ul class="languages__list"><li class="languages__item"><a href="/" class="languages__link router-link-active">
        English
      </a></li><li class="languages__item"><a href="/zh/posts/ru-he-rang-ni-dejs-xie-de-geng-piao-liang.html" class="languages__link router-link-exact-active router-link-active">
        Chinese
      </a></li></ul></div></div> <div class="column xs-33 sm-60"><div class="header__logo"><a href="/zh/" itemprop="url" class="header-top-logo__link router-link-active"><img itemprop="logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAyCAMAAAD7sXLbAAABDlBMVEUAAAA0SV00SFw0SF40SV40SF40SF0wQGA1SF2u6eau1dQ0SF01RVq+0tbfcZSuxsqwx8qtwcYzSF6y5d4wSGDpdJis3dmwztE1SV40SF2ntMCz4980R16tzs/TbpGov8Wxu8PDa4qtwcQ0SV3GaYqnu8Go0tKxv8avZII1SF2+ztS6z9XzeZ41SV6p7ubwdprki6ep6+Sx392r5+Ku5OBafok9Vmk5SV/EwcnNscDbmbF5qq/ohqTmc5eKXHh0WHJoVG670NOT0M2Gvr5ok5vWb5LLbY7AaYq1Z4erZIRGY3NuVnBDTGKg49y219eV0s+PyceMxsXJt8JwnaPUh6Lse51iiJKhYoBNbHtcUWoRJ6B1AAAALXRSTlMAwECA7+C/EJ8N828wH/3f1KBfNSD+9PPPsEwb8O7e27iUk4+BgH5sZmBTMBV50rNAAAABnUlEQVRIx42U51rCMBSGYymljAICMsS9V1paCihDEBFUcO/7vxEreTBtZt+ffd4m3zknCZiT06JQrSggHKkyRGhKKF1Fdtg/otCPXpDoEUgQiQl9FZKoSYGuQAZRfhnHkIlWkMUXlyH3oZpj+UuQj5YS+zR6TOLTvaV8CWVF4MtDyXXcKbmPOyXz6fFJ/O9R4544UwK/eW16PHQaTfxtV+B7OsJ+fvvfRuf6DdPP02IbhfJnk974awCHJoH9MvJ+qZB+68b6491kMex8xgn/0ppzYXLIE34a+U5If4D0msmDyHMniVMM1tvqIf+R5x8E/SnSuzw9QcxLEqdYRT6OI+pOfZl8baei7iQM6j7eIv+VszjpzyyES+vrBsA+cRbalO3s0+8DPgtXpL4ZByy/z67WPQQB9IU/Qf55UM/GOe/zD2u2iVXuez6ml3d3AE2STo+jMFDwPcTNwVEoCv7Rtql50kTxqD4cZNvZKuCSRNcQF2tnToGA2Fp/xZ8mYwAxRxaiVvfs0gmQsjdfv+t6SfIgDGfbG+maU9oy5Oov1sAUptGGixIAAAAASUVORK5CYII=" srcset="/logo/ktquez-play-logo.png 1x, /logo/ktquez-play-logo@2x.png 2x" alt="小窝"></a></div> <meta itemprop="name" content=""> </div> <div class="column xs-33 sm-20"><div class="search header-top__search"><!----> <span class="icon search__icon icon-search"></span></div> <div class="switch-bw header-top__toggle"><span class="switch-bw__text">
    开启夜间模式
  </span> <label for="switch-bw" class="switch-bw__label"><input type="checkbox" id="switch-bw" name="switch-bw" aria-labelledby="switch-bw-text" class="switch-bw__input"> <span class="switch-bw__ball"></span> <span id="switch-bw-text" hidden="hidden">switch to black or white</span></label></div></div></div></header> <main id="main" itemscope="itemscope" itemtype="https://schema.org/Blog" class="main-page"><div><a href="#main" class="vue-skip-to">跳到主要内容</a> <div><div class="page page__full row justify-right"><article itemscope="itemscope" itemprop="blogPost" itemtype="https://schema.org/BlogPosting" class="column xs-100 page__full__box box-default"><meta itemprop="mainEntityOfPage" content="/zh/posts/ru-he-rang-ni-dejs-xie-de-geng-piao-liang.html"> <header class="page-header page__full-header"><button type="button" class="ui-button reset-button back-button"><span class="icon back-button__icon icon--arrow icon-arrow"></span> <span class="back-button__text">返回</span></button> <div class="page-header__meta"><time datetime="Sun May 12 2019 11:11:00 GMT+0800 (GMT+08:00)" itemprop="datePublished" class="text">
            </time> <meta itemprop="dateModified" content="currentPost.updated_at"> <!----></div> <h1 itemprop="name headline" class="page-header__title">如何让你的JS写得更漂亮</h1> <div class="page-header-cat"><nav class="page-header-cat__nav"><ul class="page-header-cat__list"><li class="page-header-cat__item"><a href="/zh/categories/frontend.html" itemprop="keywords" class="page-header-cat__link meta-text">
                  前端开发
                </a></li></ul></nav></div> <div itemprop="author" itemscope="itemscope" itemtype="https://schema.org/Person" class="page-header__author"><strong>作者: </strong> <a href="/zh/authors/nuochong.html" rel="author" itemprop="url" class="link link--filler-s-primary"><span itemprop="name" class="not-black">诺冲</span></a></div></header> <!----> <!----> <section class="page-content page__full-content"><div class="row"><div class="column no-pad-l sm-50 post-share"><div class="observer" data-v-e3cf7e50><!----> <!----> <!----></div></div> <!----></div> <div class="row"><div class="column no-pad-l md-75 xl-67 post-content"><div class="post-content__box-player"><!----></div> <div class="post-content__excerpt"><!----></div> <div class="post-content__table-contents"><div class="table-contents"><h3 id="table-of-content" class="table-contents__title">目录</h3> <nav><ol class="table-contents__list"><li class="table-contents__item"><a href="#_1-按强类型风格写代码" title="1. 按强类型风格写代码" class="table-contents__link"><span>1. 按强类型风格写代码</span></a></li><li class="table-contents__item"><a href="#_2-减少作用域查找" title="2. 减少作用域查找" class="table-contents__link"><span>2. 减少作用域查找</span></a></li><li class="table-contents__item"><a href="#_3-避免-的使用" title="3. 避免==的使用" class="table-contents__link"><span>3. 避免==的使用</span></a></li><li class="table-contents__item"><a href="#_4-合并表达式" title="4. 合并表达式" class="table-contents__link"><span>4. 合并表达式</span></a></li><li class="table-contents__item"><a href="#_6-使用-es6-简化代码" title="6. 使用 ES6 简化代码" class="table-contents__link"><span>6. 使用 ES6 简化代码</span></a></li></ol></nav></div></div> <div itemprop="articleBody"><div class="content__default"><p>网上有不少关于 JS 编写优化建议，这里我根据自己的经验提出一些比较有用的意见。</p> <h2 id="_1-按强类型风格写代码"><a href="#_1-按强类型风格写代码" class="header-anchor">#</a> 1. 按强类型风格写代码</h2> <p>JS 是弱类型的，但是写代码的时候不能太随意，写得太随意也体现了编码风格不好。下面分点说明：
（1）定义变量的时候要指明类型，告诉 JS 解释器这个变量是什么数据类型的，而不要让解释器去猜，例如不好的写法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> num<span class="token punctuation">,</span> str<span class="token punctuation">,</span> obj<span class="token punctuation">;</span>
</code></pre></div><p>声明了三个变量，但其实没什么用，因为解释器不知道它们是什么类型的，好的写法应该是这样的：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
  str <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span>
  obj <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre></div><p>定义变量的时候就给他一个默认值，这样不仅方便了解释器，也方便了阅读代码的人，他会在心里有数——知道这些变量可能会当作什么用。</p> <p>（2）不要随意地改变变量的类型，例如下面代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
num <span class="token operator">=</span> <span class="token string">'-'</span> <span class="token operator">+</span> num<span class="token punctuation">;</span>
</code></pre></div><p>第 1 行它是一个整型，第 2 行它变成了一个字符串。因为 JS 最终都会被解释成汇编的语言，汇编语言变量的类型肯定是要确定的，你把一个整型的改成了字符串，那解释器就得做一些额外的处理。并且这种编码风格是不提倡的，有一个变量第 1 行是一个整型，第 10 行变成了一个字符串，第 20 行又变成了一个 object，这样就让阅读代码的人比较困惑，上面明明是一个整数，怎么突然又变成一个字符串了。好的写法应该是再定义一个字符串的变量：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sign <span class="token operator">=</span> <span class="token string">'-'</span> <span class="token operator">+</span> num<span class="token punctuation">;</span>
</code></pre></div><p>（3）函数的返回类型应该是要确定的，例如下面不确定的写法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">return</span> count <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>getPrice 这个函数有可能返回一个整数，也有可能返回一个空的字符串。这样写也不太好，虽然它是符合 JS 语法的，但这种编码风格是不好的。使用你这个函数的人会有点无所适从，不敢直接进行加减乘除，因为如果返回字符串进行运算的话值就是 NaN 了。函数的返回类型应该是要确定的，如下面是返回整型：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">return</span> count <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后告诉使用者，如果返回-1 就表示不合法。如果类型确定，解释器也不用去做一些额外的工作，可以加快运行速度。</p> <h2 id="_2-减少作用域查找"><a href="#_2-减少作用域查找" class="header-anchor">#</a> 2. 减少作用域查找</h2> <p>（1）不要让代码暴露在全局作用域下
例如以下运行在全局作用域的代码：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> map <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#my-map'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'600px'</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>有时候你需要在页面直接写一个 script，要注意在一个 script 标签里面，代码的上下文都是全局作用域的，由于全局作用域比较复杂，查找比较慢。例如上面的 map 变量，第二行在使用的时候，需要在全局作用域查找一下这个变量，假设 map 是在一个循环里面使用，那可能就会有效率问题了。所以应该要把它搞成一个局部的作用域：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> map <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#my-map'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'600px'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>上面用了一个 function 制造一个局部作用域，也可以用 ES6 的块级作用域。由于 map 这个变量直接在当前的局部作用域命中了，所以就不用再往上一级的作用域（这里是全局作用域）查找了，而局部作用域的查找是很快的。同时直接在全局作用域定义变量，会污染 window 对象。</p> <p>（2）不要滥用闭包
闭包的作用在于可以让子级作用域使用它父级作用域的变量，同时这些变量在不同的闭包是不可见的。这样就导致了在查找某个变量的时候，如果当前作用域找不到，就得往它的父级作用域查找，一级一级地往上直到找到了，或者到了全局作用域还没找到。因此如果闭包嵌套得越深，那么变量查找的时间就越长。如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  count<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> factor <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> count <span class="token operator">*</span> factor <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面的代码定义了一个 process 函数，在这个函数里面 count 变量的查找时间要高于局部的 factor 变量。其实这里不太适合用闭包，可以直接把 count 传给 process：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  count<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> factor <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> count <span class="token operator">*</span> factor <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">process</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样 count 的查找时间就和 factor 一样，都是在当前作用域直接命中。这个就启示我们如果某个全局变量需要频繁地被使用的时候，可以用一个局部变量缓存一下，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>protocal <span class="token operator">===</span> <span class="token string">'https:'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  url <span class="token operator">=</span> <span class="token string">'wss://xxx.com'</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname <span class="token operator">+</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>频繁地使用了 window.location 对象，所以可以先把它缓存一下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> location <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>location<span class="token punctuation">.</span>protocal <span class="token operator">===</span> <span class="token string">'https:'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  url <span class="token operator">=</span> <span class="token string">'wss://xxx.com'</span> <span class="token operator">+</span> location<span class="token punctuation">.</span>pathname <span class="token operator">+</span> location<span class="token punctuation">.</span>search<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>搞成了一个局变变量，这样查找就会明显快于全局的查找，代码也可以写少一点。</p> <h2 id="_3-避免-的使用"><a href="#_3-避免-的使用" class="header-anchor">#</a> 3. 避免==的使用</h2> <p>这里你可能会有疑问了，有些人喜欢用==，有些人喜欢用===，大家的风格不一样，你为什么要强制别人用===呢？习惯用==的人，不能仅仅是因为==比===少敲了一次键盘。为什么不提倡用==呢？</p> <p>（1）如果你确定了变量的类型，那么就没必要使用==了，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> num <span class="token operator">!=</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面的两个例子都是确定类型的，一个是字符串，一个是整数。就没必要使用==了，直接用===就可以了。</p> <p>（2）如果类型不确定，那么应该手动做一下类型转换，而不是让别人或者以后的你去猜这里面有类型转换，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> totalPage <span class="token operator">=</span> <span class="token string">'5'</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>totalPage<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>（3）使用==在 JSLint 检查的时候是不通过的：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如下 JSLint 的输出：</p> <div class="language-js extra-class"><pre class="language-js"><code>Expected ‘<span class="token operator">===</span>’ and instead saw ‘<span class="token operator">==</span>’<span class="token punctuation">.</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>（4）并且使用==可能会出现一些奇怪的现象，这些奇怪的现象可能会给代码埋入隐患：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token string">''</span> <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
<span class="token number">0</span> <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token number">0</span> <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token string">''</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'abc'</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token boolean">true</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre></div><p>上面的比较在用===的时候都是 false，这样才是比较合理的。例如第一点 null 居然会等于 undefined，就特别地奇怪，因为 null 和 undefined 是两个毫无关系的值，null 应该是作为初始化空值使用，而 undefined 是用于检验某个变量是否未定义。</p> <p>这和第 1 点介绍强类型的思想是相通的。</p> <h2 id="_4-合并表达式"><a href="#_4-合并表达式" class="header-anchor">#</a> 4. 合并表达式</h2> <p>如果用 1 句代码就可以实现 5 句代码的功能，那往往 1 句代码的执行效率会比较高，并且可读性可能会更好</p> <p>（1）用三目运算符取代简单的 if-else
如上面的 getPrice 函数：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">return</span> count <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以改成：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> count <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> count <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个比写一个 if-else 看起来清爽多了。当然，如果你写了 if-else，压缩工具也会帮你把它改三目运算符的形式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">0</span> <span class="token operator">&gt;</span> e <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">100</span> <span class="token operator">*</span> e<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>（2）连等
连等是利用赋值运算表达式会返回所赋的值，并且执行顺序是从右到左的，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>overtime <span class="token operator">=</span> favhouse <span class="token operator">=</span> listingDetail <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre></div><p>有时候你会看到有人这样写：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>age <span class="token operator">=</span> <span class="token operator">+</span>form<span class="token punctuation">.</span>age<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'你是成年人'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  consoe<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'小朋友，你还有'</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">18</span> <span class="token operator">-</span> age<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'就成年了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>也是利用了赋值表达式会返回一个值，在 if 里面赋值的同时用它的返回值做判断，然后 else 里面就已经有值了。上面的+号把字符串转成了整数。</p> <p>（3）自增
利用自增也可以简化代码。如下，每发出一条消息，localMsgId 就自增 1：</p> <div class="language-js extra-class"><pre class="language-js"><code>chatService<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>localMsgId<span class="token operator">++</span><span class="token punctuation">,</span> msgContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="5"><li>减少魔数</li></ol> <p>例如，在某个文件的第 800 行，冒出来了一句：</p> <div class="language-js extra-class"><pre class="language-js"><code>dialogHandler<span class="token punctuation">.</span>showQuestionNaire（<span class="token string">&quot;seller&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sell&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>就会让人很困惑了，上面的四个常量分别代表什么呢，如果我不去查一个那个函数的变量说明就不能够很快地意会到这些常量分别有什么用。这些意义不明的常量就叫“魔数”。</p> <p>所以最好还是给这些常量取一个名字，特别是在一些比较关键的地方。例如上面的代码可改成：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> naireType <span class="token operator">=</span> <span class="token string">'seller'</span><span class="token punctuation">,</span>
  dialogType <span class="token operator">=</span> <span class="token string">'sell'</span><span class="token punctuation">,</span>
  questionsCount <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
  reloadWindow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
naireHandler<span class="token punctuation">.</span><span class="token function">showNaire</span><span class="token punctuation">(</span>naireType<span class="token punctuation">,</span> dialogType<span class="token punctuation">,</span> questionsCount<span class="token punctuation">,</span> reloadWindow<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这样意义就很明显了。</p> <h2 id="_6-使用-es6-简化代码"><a href="#_6-使用-es6-简化代码" class="header-anchor">#</a> 6. 使用 ES6 简化代码</h2> <p>ES6 已经发展很多年了，兼容性也已经很好了。恰当地使用，可以让代码更加地简洁优雅。</p> <p>（1）使用箭头函数取代小函数
有很多使用小函数的场景，如果写个 function，代码起码得写 3 行，但是用箭头函数一行就搞定了，例如实现数组从大到小排序：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
nums<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> b <span class="token operator">-</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出[9, 8, 4, 1, 0]</span>
</code></pre></div><p>如果用箭头函数，排序只要一行就搞定了：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
nums<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token parameter">b</span> <span class="token operator">=&gt;</span> b <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>代码看起来简洁多了，还有 setTimeout 里面经常会遇到只要执行一行代码就好了，写个 function 总感觉有点麻烦，用字符串的方式又不太好，所以这种情况用箭头函数也很方便：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>箭头函数在 C++/Java 等其它语言里面叫做 Lambda 表达式，Ruby 比较早就有这种语法形式了，后来 C++/Java 也实现了这种语法。</p> <p>当然箭头函数或者 Lambda 表达式不仅适用于这种一行的，多行代码也可以，不过在一行的时候它的优点才比较明显。</p> <p>（2）使用 ES6 的 class
虽然 ES6 的 class 和使用 function 的 prototype 本质上是一样的，都是用的原型。但是用 class 可以减少代码量，同时让代码看起来更加地高大上，使用 function 要写这么多：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">addAge</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>使用 class 代码看加地简洁易懂：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">addAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">setName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>并且 class 还可以很方便地实现继承、静态的成员函数，就不需要自己再去通过一些技巧去实现了。</p> <p>（3）字符串拼接
以前要用+号拼接：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> tpl <span class="token operator">=</span> <span class="token string">'&lt;div&gt;'</span> <span class="token operator">+</span> <span class="token string">'&lt;span&gt;1&lt;/span&gt;'</span> <span class="token operator">+</span> <span class="token string">'&lt;/div&gt;'</span><span class="token punctuation">;</span>
</code></pre></div><p>现在只要用两个反引号“`”就可以了：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> tpl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;
    &lt;span&gt;1&lt;/span&gt;
&lt;/div&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><p>另外反引号还支持占位替换，原本你需要：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> page <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
  type <span class="token operator">=</span> <span class="token function">encodeURIComponet</span><span class="token punctuation">(</span><span class="token string">'#js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">'/list?page='</span> <span class="token operator">+</span> page <span class="token operator">+</span> <span class="token string">'&amp;type='</span> <span class="token operator">+</span> type<span class="token punctuation">;</span>
</code></pre></div><p>现在只需要：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/list?page=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;type=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><p>就不用使用+号把字符串拆散了。</p> <p>（4）块级作用域变量
块级作用域变量也是 ES6 的一个特色，下面的代码是一个任务队列的模型抽象：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'i is '</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> tasks<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  tasks<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>但是上面代码的执行输出是 4，4，4，4，并且不是想要输出：0，1，2，3，所以每个 task 就不能取到它的 index 了，这是因为闭包都是用的同一个 i 变量，i 已经变成 4 了，所以执行闭包的时候就都是 4 了。那怎么办呢？可以这样解决：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'i is '</span> <span class="token operator">+</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> tasks<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  tasks<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>把 i 赋值给了 k，由于 k 它是一个 function 的一个参数，每次执行函数的时候，肯定会实例化新的 k，所以每次的 k 都是不同的变量，这样就输出就正常了。</p> <p>但是代码看起来有点别扭，如果用 ES6，只要把 var 改成 let 就可以了：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'i is '</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> tasks<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  tasks<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>只改动了 3 个字符就达到了目的。因为 for 循环里面有个大括号，大括号就是一个独立的作用域，let 定义的变量在独立的作用域里面它的值也是独立的。当然即使没写大括号 for 循环执行也是独立的。</p> <p>除了以上几点，ES6 还有其它一些比较好用的功能，如 Object 的 assign，Promise 等，也是可以帮助写出简洁高效的代码。</p> <p>以上列了我自己在实际写代码过程中遇到的一些问题和一些个人认为比较重要的方面，其它的还有变量命名、缩进、注释等，这里就不提及了。写代码的风格也体现了编程的素养，有些人的代码看起来非常地干净利落，而有些人的代码看起来让人比较痛苦。这种编程素质的提升需要有意识地去做一些改进，有些人虽然代码写得很烂，但是他自己并不觉得有什么问题。这就需要多去学下别人的代码，甚至学一下其它语言的书写，两者一比较就能发现差异，或者看下这方面的书，像什么代码大全之类的。</p> <p><a href="https://mp.weixin.qq.com/s/Dqk43sGalyeMRkuE6EQgPA" target="_blank" rel="noopener noreferrer">如何让你的 JS 写得更漂亮<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div></div></div> <div id="shangfang" class="column no-pad-r sm-25 xl-33 xsNone smNone post-sidebar"><div class="ads-container"><!----></div> <!----> <div id="zhongjian"><div class="table-contents-fixed"><h3 id="table-of-content" class="table-contents__title">浮动目录</h3> <nav><ol class="table-contents__list"></ol></nav></div></div></div> <aside id="dibujuli" class="column xs-100"><hr class="divider"> <div><div class="observer" data-v-e3cf7e50><!----> <!----> <!----></div></div> <hr class="divider"> <section class="post-content__disqus"><!----></section></aside></div></section></article></div> <section class="row section-newsletter justify-center newsletter-post-wrap"><div class="column sm-100 md-67 xl-50"><div class="newsletter not-black"><span class="meta-text meta-text--primary not-black">关注我们</span> <h2 class="newsletter__title not-black">在收件箱接收新的内容推送</h2> <form method="post" action="https://luzhaoyang.us4.list-manage.com/subscribe/post?u=1de83ba90307cf0e38650d622&amp;amp;id=04aeba270a" class="newsletter__form not-black"><label for="email_news-1592831692273" class="newsletter__label not-black"><input type="email" name="EMAIL" id="email_news-1592831692273" required="required" placeholder="在这里输入您的电子邮件" autocomplete="off" aria-label="在这里输入您的电子邮件" value="" class="ui-input-field reset-input newsletter__input"></label> <button type="submit" class="ui-button reset-button newsletter__button txt-upper ui-button--primary">
        订阅
      </button></form></div></div></section> <aside class="container main"></aside></div> <!----> <div><div class="elevator"><a class="elevator__link"><span class="icon elevator__icon icon-greaterthan"></span> <!----></a> <!----></div> <div class="mask-container"><div class="mask-wrap"><div class="circle-wrapper"><svg xmlns="http://www.w3.org/200/svg" height="100%" width="100%"><circle cx="66" cy="66" r="55" fill="none" stroke="#FF4437" stroke-width="5" stroke-linecap="round" class="circle-full"></circle> <circle cx="66" cy="66" r="55" fill="none" stroke-width="5" stroke-linecap="round" stroke="#FF4437" stroke-dasharray="0,10000" class="circle-detail"></circle></svg> <img class="mobile-bgm-img coupon-num had-percent"></div> <div></div> <div></div> <div class="mobile-bgm-list"><i class="reco-bgm reco-bgm-last last mobile-bgm-btn"></i> <i class="reco-bgm reco-bgm-pause pause mobile-bgm-btn" style="display:none;"></i> <i class="reco-bgm reco-bgm-play play mobile-bgm-btn" style="display:;"></i> <i class="reco-bgm reco-bgm-next next mobile-bgm-btn"></i></div> <div class="mobile-bgm-close"><i class="iconfont iconLogonClosed mobile-bgm-btn"></i></div></div></div></div> <!----></div></main> <footer id="footer" class="footer "><div class="footer-box1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1366 161" class="footer-box__shape"><path d="M-11.925-4809v-154.746c40.454,19.75,273.683,130.936,420.544,142.612,161.25,12.821,339.978-42.709,521.543-86.3,169.82-40.769,395.43,29.2,423.912,38.429v60Z" transform="translate(11.926 4970)"></path></svg></div> <div class="footer-box2"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1366 246" class="footer-box__shape"><path d="M-1505.5-4725.5v-238.1c8.149-3.133,18.138-5.059,29.672-5.9h30.954c201.21,11.667,696.6,224.535,855.572,236.458,205.129,15.385,287.179-164.1,432.047-175.625a42.381,42.381,0,0,1,16.756,1.857V-4725.5Z" transform="translate(1506 4971)"></path></svg> <ul class="footer-social__list"></ul> <div class="footer-newsletter not-black"><div class="newsletter not-black"><span class="meta-text meta-text--primary not-black">关注我们</span> <h2 class="newsletter__title not-black">在收件箱接收新的内容推送</h2> <form method="post" action="https://luzhaoyang.us4.list-manage.com/subscribe/post?u=1de83ba90307cf0e38650d622&amp;amp;id=04aeba270a" class="newsletter__form not-black"><label for="email_news-1592831692275" class="newsletter__label not-black"><input type="email" name="EMAIL" id="email_news-1592831692275" required="required" placeholder="在这里输入您的电子邮件" autocomplete="off" aria-label="在这里输入您的电子邮件" value="" class="ui-input-field reset-input newsletter__input"></label> <button type="submit" class="ui-button reset-button newsletter__button txt-upper ui-button--primary">
        订阅
      </button></form></div></div></div> <section class="footer-box3"><div class="row"><div class="column sm-50 footer-card"><div class="observer" data-v-e3cf7e50><div class="spinner observer__spinner" data-v-e3cf7e50><div class="double-bounce1"></div> <div class="double-bounce2"></div></div> <!----> <!----></div></div> <div class="column sm-50 footer-nav"><div class="row justify-right"><div class="column xs-50 sm-40 md-33 footer-nav__box footer-nav__box--1 not-black"><h2 class="meta-text title not-black">我的小窝</h2> <nav class="footer-nav1"><ul><li class="footer-nav1__item"><a href="/zh/categories/" class="not-black">文章分类</a> <!----></li><li class="footer-nav1__item"><a href="/zh/gallery/" class="not-black">摄影相册</a> <!----></li><!----><li class="footer-nav1__item"><a href="/zh/travel/" class="not-black">旅行简记</a> <!----></li><li class="footer-nav1__item"><a href="/zh/about/" class="not-black">关于我们</a> <!----></li><li class="footer-nav1__item"><a href="/zh/contact/" class="not-black">联系我们</a> <!----></li></ul></nav></div> <div class="column xs-50 sm-40 md-33 footer-nav__box footer-nav__box--2"><h2 class="meta-text title not-black">社区</h2> <nav class="footer-nav2"><ul><li class="footer-nav2__item"><!----> <a href="https://jq.qq.com/?_wv=1027&amp;k=5sOoWzp" rel="noopener nofollow" target="_blank" class="not-black">Q群 931024509</a></li><li class="footer-nav2__item"><!----> <a href="https://nativescript-vue-examples.luzhaoyang.com/" rel="noopener nofollow" target="_blank" class="not-black">NSVue 示例</a></li><li class="footer-nav2__item"><!----> <a href="https://marketplace.visualstudio.com/items?itemName=nuochong.nativescript-vue-extend" rel="noopener nofollow" target="_blank" class="not-black">NSVue 扩展</a></li><li class="footer-nav2__item"><!----> <a href="https://luzhaoyang.com/vue-auto-complete/" rel="noopener nofollow" target="_blank" class="not-black">Vue Auto Complete</a></li></ul></nav></div></div></div> <div class="cpolumn sm-100 footer-copy"><p class="visitors-total" data-v-504ab208><span data-v-504ab208>累计访问</span> <span data-v-504ab208></span> <span data-v-504ab208>次</span></p> <p class="footer-copy-last">2018 - 2020 © NUOCHONG - 源于 
  <a href="https://github.com/" rel="noopener" target="_blank">
    GITHUB
  </a></p></div></div> <span class="shapes shapes--circle" style="left: 3%; top: -20%"></span> <span class="shapes shapes--primary shapes--color3" style="left: 30%; top: -15%"></span> <span class="shapes shapes--primary" style="left: 13%; top: -80%; transform: rotate(45deg)"></span> <span class="shapes shapes--circle shapes--color4" style="left: 40%; top: 200px"></span> <span class="shapes shapes--primary" style="left: 15%; bottom: 10%; transform: rotate(75deg)"></span> <span class="shapes shapes--circle shapes--color3" style="right: 50%; top: 30%"></span> <span class="shapes shapes--primary" style="right: 20%; top: -100%"></span> <span class="shapes shapes--circle" style="right: 10%; top: -20%"></span> <span class="shapes shapes--color4" style="right: 35%; top: -20%; transform: rotate(45deg)"></span> <span class="shapes shapes--circle" style="left: 40%; top: -50%"></span> <span class="shapes shapes--color3" style="right: 30%; top: 20%"></span> <span class="shapes shapes--circle shapes--primary" style="right: 30%; bottom: 20%"></span></section></footer></div> <!----> <!----></div><div class="global-ui"><div><!----> <!----></div><!----></div></div>
    <script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/app.8bf9a8f2.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/20.236149f9.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/4.53596af9.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/19.a391d301.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/18.bab59606.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/26.16fe9f1a.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/0.349e4165.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/5.560bdd87.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/3.2b37585b.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/23.4f0f3eab.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/120.8fd77ff5.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/6.e048774a.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/13.dcd66a11.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/1.763ffe07.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/11.8eaf56aa.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/21.d8a9dfb2.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/2.a5d7b28c.js" defer></script><script src="https://cdn.jsdelivr.net/gh/nuochong/nuochong.github.io@v1.0/assets/js/27.96a2bbc6.js" defer></script>
  </body>
</html>
