<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2019年，是否可以抛弃CSS预处理器？ | 小窝</title>
    <meta name="description" content="博客">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="icon" href="/favicon/favicon.ico">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/favicon/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/favicon/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
  <link rel="stylesheet" href="https://at.alicdn.com/t/font_1575342_85bw7q9vq8c.css" type="text/css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.11.0/baguetteBox.css" type="text/css">
  <link rel="stylesheet" href="https://unpkg.com/swiper/css/swiper.css" type="text/css">
  <link rel="stylesheet" href="https://cdn.bootcss.com/animate.css/3.7.2/animate.min.css" type="text/css">
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/v1.7.0/mapbox-gl.css" type="text/css">
  <link rel="stylesheet" href="https://www.zhangxinxu.com/study/201903/css-idea/cssgram.min.css" type="text/css">
  <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.firebase.com/js/client/2.0.4/firebase.js"></script>
  <script src="https://unpkg.com/swiper/js/swiper.js"></script>
  <script src="https://static.runoob.com/assets/qrcode/qrcode.min.js"></script>
  <script src="https://unpkg.com/vue-toasted"></script>
  <script src="https://cdn.bootcss.com/wow/1.1.2/wow.js"></script>
  <script src="https://cdn.bootcss.com/velocity/2.0.5/velocity.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/locale/zh-cn.js"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/v1.7.0/mapbox-gl.js"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-language/v0.10.1/mapbox-gl-language.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/console-badge"></script>
  <link rel="alternate" type="application/rss+xml" href="https://luzhaoyang.com/rss.xml" title=" RSS Feed">
  <link rel="alternate" type="application/atom+xml" href="https://luzhaoyang.com/feed.atom" title=" Atom Feed">
  <link rel="alternate" type="application/json" href="https://luzhaoyang.com/feed.json" title=" JSON Feed">
    <meta property="null" content="null"><meta name="null" content="null"><meta property="og:title" content="2019年，是否可以抛弃CSS预处理器？"><meta property="og:type" content="website"><meta property="og:url" content="/zh/posts/2019-nian-shi-fou-ke-yi-pao-qicss-yu-chu-li-qi-.html"><meta name="twitter:title" content="2019年，是否可以抛弃CSS预处理器？"><meta name="twitter:url" content="/zh/posts/2019-nian-shi-fou-ke-yi-pao-qicss-yu-chu-li-qi-.html"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:label2" content="Filed under"><meta name="twitter:data2" content="前端开发"><meta property="article:tag" content="前端开发">
    <link rel="preload" href="/assets/css/styles.195f3b74.css" as="style"><link rel="preload" href="/assets/js/app.195f3b74.js" as="script"><link rel="preload" href="/assets/css/17.styles.77324870.css" as="style"><link rel="preload" href="/assets/js/17.77324870.js" as="script"><link rel="preload" href="/assets/css/4.styles.e00acd61.css" as="style"><link rel="preload" href="/assets/js/4.e00acd61.js" as="script"><link rel="preload" href="/assets/css/16.styles.6feccbdc.css" as="style"><link rel="preload" href="/assets/js/16.6feccbdc.js" as="script"><link rel="preload" href="/assets/css/15.styles.867f2ef3.css" as="style"><link rel="preload" href="/assets/js/15.867f2ef3.js" as="script"><link rel="preload" href="/assets/css/23.styles.1f788c7a.css" as="style"><link rel="preload" href="/assets/js/23.1f788c7a.js" as="script"><link rel="preload" href="/assets/css/0.styles.0e34bbc8.css" as="style"><link rel="preload" href="/assets/js/0.0e34bbc8.js" as="script"><link rel="preload" href="/assets/js/5.c605b54d.js" as="script"><link rel="preload" href="/assets/css/3.styles.8a5b8f76.css" as="style"><link rel="preload" href="/assets/js/3.8a5b8f76.js" as="script"><link rel="preload" href="/assets/css/20.styles.a4630952.css" as="style"><link rel="preload" href="/assets/js/20.a4630952.js" as="script"><link rel="preload" href="/assets/js/58.fa4b6c8c.js" as="script"><link rel="preload" href="/assets/css/6.styles.c6fdf831.css" as="style"><link rel="preload" href="/assets/js/6.c6fdf831.js" as="script"><link rel="preload" href="/assets/css/13.styles.5bfa9682.css" as="style"><link rel="preload" href="/assets/js/13.5bfa9682.js" as="script"><link rel="preload" href="/assets/css/1.styles.4920de8d.css" as="style"><link rel="preload" href="/assets/js/1.4920de8d.js" as="script"><link rel="preload" href="/assets/css/11.styles.8304f194.css" as="style"><link rel="preload" href="/assets/js/11.8304f194.js" as="script"><link rel="preload" href="/assets/css/18.styles.8bf7acfe.css" as="style"><link rel="preload" href="/assets/js/18.8bf7acfe.js" as="script"><link rel="preload" href="/assets/css/2.styles.ce2db3a2.css" as="style"><link rel="preload" href="/assets/js/2.ce2db3a2.js" as="script"><link rel="prefetch" href="/assets/css/10.styles.2d23ea48.css"><link rel="prefetch" href="/assets/css/12.styles.7d092717.css"><link rel="prefetch" href="/assets/css/14.styles.5aae538d.css"><link rel="prefetch" href="/assets/css/19.styles.7711c911.css"><link rel="prefetch" href="/assets/css/21.styles.78fada29.css"><link rel="prefetch" href="/assets/css/22.styles.52fa9eda.css"><link rel="prefetch" href="/assets/css/24.styles.a64f2802.css"><link rel="prefetch" href="/assets/css/28.styles.c292350a.css"><link rel="prefetch" href="/assets/css/7.styles.c0272b13.css"><link rel="prefetch" href="/assets/js/10.2d23ea48.js"><link rel="prefetch" href="/assets/js/12.7d092717.js"><link rel="prefetch" href="/assets/js/14.5aae538d.js"><link rel="prefetch" href="/assets/js/19.7711c911.js"><link rel="prefetch" href="/assets/js/21.78fada29.js"><link rel="prefetch" href="/assets/js/22.52fa9eda.js"><link rel="prefetch" href="/assets/js/24.a64f2802.js"><link rel="prefetch" href="/assets/js/25.23506b2c.js"><link rel="prefetch" href="/assets/js/26.f0e810b7.js"><link rel="prefetch" href="/assets/js/27.c505d751.js"><link rel="prefetch" href="/assets/js/28.c292350a.js"><link rel="prefetch" href="/assets/js/29.af9cb744.js"><link rel="prefetch" href="/assets/js/30.d363a092.js"><link rel="prefetch" href="/assets/js/31.66139d19.js"><link rel="prefetch" href="/assets/js/32.44969052.js"><link rel="prefetch" href="/assets/js/33.5040d035.js"><link rel="prefetch" href="/assets/js/34.2714db63.js"><link rel="prefetch" href="/assets/js/35.afd51e09.js"><link rel="prefetch" href="/assets/js/36.3bb3f587.js"><link rel="prefetch" href="/assets/js/37.766309b2.js"><link rel="prefetch" href="/assets/js/38.7cf2247e.js"><link rel="prefetch" href="/assets/js/39.54c3e038.js"><link rel="prefetch" href="/assets/js/40.30732f85.js"><link rel="prefetch" href="/assets/js/41.86010f23.js"><link rel="prefetch" href="/assets/js/42.daf38501.js"><link rel="prefetch" href="/assets/js/43.6976862e.js"><link rel="prefetch" href="/assets/js/44.8a3bbcd4.js"><link rel="prefetch" href="/assets/js/45.10d22931.js"><link rel="prefetch" href="/assets/js/46.f7bd0ab7.js"><link rel="prefetch" href="/assets/js/47.92cb9fe1.js"><link rel="prefetch" href="/assets/js/48.38aa8fa6.js"><link rel="prefetch" href="/assets/js/49.b2ad4e7d.js"><link rel="prefetch" href="/assets/js/50.1f43c161.js"><link rel="prefetch" href="/assets/js/51.3335a645.js"><link rel="prefetch" href="/assets/js/52.afdd90bd.js"><link rel="prefetch" href="/assets/js/53.5e698ca0.js"><link rel="prefetch" href="/assets/js/54.9ff6b7ea.js"><link rel="prefetch" href="/assets/js/55.3a3782bc.js"><link rel="prefetch" href="/assets/js/56.b0c2e334.js"><link rel="prefetch" href="/assets/js/57.aed9ddd2.js"><link rel="prefetch" href="/assets/js/59.8c9ce4d9.js"><link rel="prefetch" href="/assets/js/60.e2cdd71c.js"><link rel="prefetch" href="/assets/js/61.59a55f5a.js"><link rel="prefetch" href="/assets/js/62.15bd553f.js"><link rel="prefetch" href="/assets/js/63.15886c57.js"><link rel="prefetch" href="/assets/js/64.1bdc71c5.js"><link rel="prefetch" href="/assets/js/65.2c4862c5.js"><link rel="prefetch" href="/assets/js/66.443c50e3.js"><link rel="prefetch" href="/assets/js/67.ebafd381.js"><link rel="prefetch" href="/assets/js/68.8c1cbc96.js"><link rel="prefetch" href="/assets/js/69.8e373276.js"><link rel="prefetch" href="/assets/js/7.c0272b13.js"><link rel="prefetch" href="/assets/js/70.96538737.js"><link rel="prefetch" href="/assets/js/71.13168efc.js"><link rel="prefetch" href="/assets/js/72.5fa7b6ef.js"><link rel="prefetch" href="/assets/js/73.49f8e9c9.js"><link rel="prefetch" href="/assets/js/74.4554569d.js"><link rel="prefetch" href="/assets/js/75.cecf8039.js"><link rel="prefetch" href="/assets/js/76.ea22fc63.js"><link rel="prefetch" href="/assets/js/77.9a2eac4d.js"><link rel="prefetch" href="/assets/js/78.3bf259b3.js"><link rel="prefetch" href="/assets/js/79.cdb8e90e.js"><link rel="prefetch" href="/assets/js/80.02494368.js"><link rel="prefetch" href="/assets/js/81.df77bc0d.js"><link rel="prefetch" href="/assets/js/82.320cf37e.js"><link rel="prefetch" href="/assets/js/83.e36d4bd8.js"><link rel="prefetch" href="/assets/js/84.a0f55fcf.js"><link rel="prefetch" href="/assets/js/85.0b6f1d5e.js"><link rel="prefetch" href="/assets/js/86.b2c3a542.js"><link rel="prefetch" href="/assets/js/87.bcda94dc.js"><link rel="prefetch" href="/assets/js/88.f63ebce0.js"><link rel="prefetch" href="/assets/js/89.8ad97354.js"><link rel="prefetch" href="/assets/js/90.6e041c68.js"><link rel="prefetch" href="/assets/js/91.b667080a.js"><link rel="prefetch" href="/assets/js/92.dce39c07.js"><link rel="prefetch" href="/assets/js/93.ca280891.js"><link rel="prefetch" href="/assets/js/94.d5a77b96.js"><link rel="prefetch" href="/assets/js/95.965629f4.js"><link rel="prefetch" href="/assets/js/96.625258bd.js"><link rel="prefetch" href="/assets/js/97.d92bdbb0.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.1a689dc7.js">
    <link rel="stylesheet" href="/assets/css/styles.195f3b74.css"><link rel="stylesheet" href="/assets/css/17.styles.77324870.css"><link rel="stylesheet" href="/assets/css/4.styles.e00acd61.css"><link rel="stylesheet" href="/assets/css/16.styles.6feccbdc.css"><link rel="stylesheet" href="/assets/css/15.styles.867f2ef3.css"><link rel="stylesheet" href="/assets/css/23.styles.1f788c7a.css"><link rel="stylesheet" href="/assets/css/0.styles.0e34bbc8.css"><link rel="stylesheet" href="/assets/css/3.styles.8a5b8f76.css"><link rel="stylesheet" href="/assets/css/20.styles.a4630952.css"><link rel="stylesheet" href="/assets/css/6.styles.c6fdf831.css"><link rel="stylesheet" href="/assets/css/13.styles.5bfa9682.css"><link rel="stylesheet" href="/assets/css/1.styles.4920de8d.css"><link rel="stylesheet" href="/assets/css/11.styles.8304f194.css"><link rel="stylesheet" href="/assets/css/18.styles.8bf7acfe.css"><link rel="stylesheet" href="/assets/css/2.styles.ce2db3a2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div itemscope="itemscope" itemtype="https://schema.org/WebPage" class="layout-main"><meta itemprop="name" content=""> <meta itemprop="alternateName" content=""> <meta itemprop="url" content="http://luzhaoyang.com"> <nav aria-label="Navigation" itemscope="itemscope" itemtype="https://schema.org/SiteNavigationElement" class="container nav-mobile not-black" style="display:none;"><span itemprop="headline" class="nav-mobile__title not-black">导航</span> <ul class="nav-mobile__list not-black"><li class="nav-mobile__item not-black"><a href="/zh/categories/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text not-black">文章分类</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/gallery/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text not-black">摄影相册</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/comments/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text not-black">我的留言</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/travel/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text not-black">旅行简记</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/about/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text not-black">关于我们</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/contact/" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text not-black">联系我们</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/categories/backend.html" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text not-black">后端开发</span></a></li><li class="nav-mobile__item not-black"><a href="/zh/categories/frontend.html" itemprop="url" class="nav-mobile__link not-black"><span class="bullet no_bw bullet--primary bullet--undefined"></span> <span class="text not-black">前端开发</span></a></li></ul></nav> <div class="container-fluid wrapper-body__nm"><header itemscope="itemscope" itemtype="https://schema.org/Organization" class="header"><!----> <div class="row header-top"><div class="column xs-33 sm-20"><div class="hamburguer header-top__hamburguer"><div class="hamburguer__wrapper"><span class="hamburguer__line"></span> <span class="hamburguer__line"></span> <span class="hamburguer__line"></span></div></div> <div class="languages header-top__languages"><div class="languages__box"><span class="languages__title meta-text">ZH</span> <span class="languages__icon"></span></div> <ul class="languages__list"><li class="languages__item"><a href="/" class="languages__link router-link-active">
        English
      </a></li><li class="languages__item"><a href="/zh/posts/2019-nian-shi-fou-ke-yi-pao-qicss-yu-chu-li-qi-.html" class="languages__link router-link-exact-active router-link-active">
        Chinese
      </a></li></ul></div></div> <div class="column xs-33 sm-60"><div class="header__logo"><a href="/zh/" itemprop="url" class="header-top-logo__link router-link-active"><img itemprop="logo" src="/ktquez-play-logo.png" srcset="/ktquez-play-logo.png 1x, /ktquez-play-logo@2x.png 2x" alt="小窝"></a></div> <meta itemprop="name" content=""> <meta itemprop="sameAs" content="https://i.youku.com/i/UNTcyNDQ2ODky?spm=a2hbt.13141534.1_1.1"><meta itemprop="sameAs" content="https://weibo.com/3032335637/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo"><meta itemprop="sameAs" content="https://space.bilibili.com/25739142"></div> <div class="column xs-33 sm-20"><div class="search header-top__search"><!----> <span class="icon search__icon icon-search"></span></div> <div class="switch-bw header-top__toggle"><span class="switch-bw__text">
    开启夜间模式
  </span> <label for="switch-bw" class="switch-bw__label"><input type="checkbox" id="switch-bw" name="switch-bw" aria-labelledby="switch-bw-text" class="switch-bw__input"> <span class="switch-bw__ball"></span> <span id="switch-bw-text" hidden="hidden">switch to black or white</span></label></div></div></div></header> <main id="main" itemscope="itemscope" itemtype="https://schema.org/Blog" class="main-page"><div><a href="#main" class="vue-skip-to">跳到主要内容</a> <div><div class="page page__full row justify-right"><article itemscope="itemscope" itemprop="blogPost" itemtype="https://schema.org/BlogPosting" class="column xs-100 page__full__box box-default"><meta itemprop="mainEntityOfPage" content="/zh/posts/2019-nian-shi-fou-ke-yi-pao-qicss-yu-chu-li-qi-.html"> <header class="page-header page__full-header"><button type="button" class="ui-button reset-button back-button"><span class="icon back-button__icon icon--arrow icon-arrow"></span> <span class="back-button__text">返回</span></button> <div class="page-header__meta"><time datetime="Sun Dec 29 2019 14:28:00 GMT+0800 (GMT+08:00)" itemprop="datePublished" class="text">
            </time> <meta itemprop="dateModified" content="currentPost.updated_at"> <!----></div> <h1 itemprop="name headline" class="page-header__title">2019年，是否可以抛弃CSS预处理器？</h1> <div class="page-header-cat"><nav class="page-header-cat__nav"><ul class="page-header-cat__list"><li class="page-header-cat__item"><a href="/zh/categories/frontend.html" itemprop="keywords" class="page-header-cat__link meta-text">
                  前端开发
                </a></li></ul></nav></div> <div itemprop="author" itemscope="itemscope" itemtype="https://schema.org/Person" class="page-header__author"><strong>作者: </strong> <a href="/zh/authors/nuochong.html" rel="author" itemprop="url" class="link link--filler-s-primary"><span itemprop="name" class="not-black">诺冲</span></a></div></header> <!----> <!----> <section class="page-content page__full-content"><div class="row"><div class="column no-pad-l sm-50 post-share"><div class="observer" data-v-48c5c728><!----> <!----> <!----></div></div> <!----></div> <div class="row"><div class="column no-pad-l md-75 xl-67 post-content"><div class="post-content__box-player"><!----></div> <div class="post-content__excerpt"><!----></div> <div class="post-content__table-contents"><div class="table-contents"><h3 id="table-of-content" class="table-contents__title">目录</h3> <nav><ol class="table-contents__list"><li class="table-contents__item"><a href="#前言" title="前言" class="table-contents__link"><span>前言</span></a></li><li class="table-contents__item"><a href="#w3c-介绍" title="W3C 介绍" class="table-contents__link"><span>W3C 介绍</span></a></li><li class="table-contents__item"><a href="#w3c-规范制定流程" title="W3C 规范制定流程" class="table-contents__link"><span>W3C 规范制定流程</span></a></li><li class="table-contents__item"><a href="#css-的历史" title="CSS 的历史" class="table-contents__link"><span>CSS 的历史</span></a></li><!----><!----><!----><li class="table-contents__item"><a href="#css-预处理器" title="CSS 预处理器" class="table-contents__link"><span>CSS 预处理器</span></a></li><li class="table-contents__item"><a href="#百花齐放" title="百花齐放" class="table-contents__link"><span>百花齐放</span></a></li><li class="table-contents__item"><a href="#优点" title="优点" class="table-contents__link"><span>优点</span></a></li><li class="table-contents__item"><a href="#缺点或不足" title="缺点或不足" class="table-contents__link"><span>缺点或不足</span></a></li><!----><!----><li class="table-contents__item"><a href="#学习成本" title="学习成本" class="table-contents__link"><span>学习成本</span></a></li><li class="table-contents__item"><a href="#调试" title="调试" class="table-contents__link"><span>调试</span></a></li><li class="table-contents__item"><a href="#回归-css" title="回归 CSS" class="table-contents__link"><span>回归 CSS</span></a></li><!----><!----><li class="table-contents__item"><a href="#generate-colors" title="Generate Colors" class="table-contents__link"><span>Generate Colors</span></a></li><!----><li class="table-contents__item"><a href="#custom-theme" title="Custom Theme" class="table-contents__link"><span>Custom Theme</span></a></li><li class="table-contents__item"><a href="#mixins-in-css" title="Mixins in CSS" class="table-contents__link"><span>Mixins in CSS</span></a></li><li class="table-contents__item"><a href="#nesting-in-css" title="Nesting in CSS" class="table-contents__link"><span>Nesting in CSS</span></a></li><li class="table-contents__item"><a href="#module-in-css" title="Module in CSS" class="table-contents__link"><span>Module in CSS</span></a></li><li class="table-contents__item"><a href="#selector-helpers" title="Selector Helpers" class="table-contents__link"><span>Selector Helpers</span></a></li><li class="table-contents__item"><a href="#matches-pseudo-class" title=":matches pseudo-class" class="table-contents__link"><span>:matches pseudo-class</span></a></li><li class="table-contents__item"><a href="#custom-selector" title="@custom-selector" class="table-contents__link"><span>@custom-selector</span></a></li><li class="table-contents__item"><a href="#用起来" title="用起来" class="table-contents__link"><span>用起来</span></a></li><li class="table-contents__item"><a href="#总结" title="总结" class="table-contents__link"><span>总结</span></a></li></ol></nav></div></div> <div itemprop="articleBody"><div class="content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>前一段时间折腾 node-sass 的安装都搞了好久。今日早读文章由@凹凸实验室授权分享。</p> <p>正文从这开始～～</p> <p>随着前端工程化的不断完善，CSS 预处理器已经成为项目中不可缺少的部分，很多人在项目技术选型阶段就会先选择一个 CSS 预处理器，绝大部分前端工程的脚手架也内置了一系列的 CSS 预处理的模版，大家已经习惯了享受 CSS 预处理器带来的书写代码的灵活流畅，反而将原生的 CSS 冷落在一旁。</p> <p>可能许多前端开发人员依然觉得 CSS 预处理器属于比较新的技术，其实不然，最早的 CSS 预处理器 Sass 从 07 年诞生距今已有 12 年，相对较新的的 Stylus 也已发布 9 年了。</p> <p>前端的技术栈发展突飞猛进，W3C 的 CSS 工作组也一直在持续从社区汲取营养，加快 CSS 的迭代。那么到现在为止，CSS 是否可以取代 CSS 预处理器的地位？CSS 预处理器会不会成为 CSS 过渡时期的产物呢？</p> <h2 id="w3c-介绍"><a href="#w3c-介绍" class="header-anchor">#</a> W3C 介绍</h2> <p>CSS 是开放网络的核心语言之一，由 W3C 规范 实现跨浏览器的标准化。因此，在深入了解 CSS 规范更新进度之前，我们有必要先了解一下 W3C 及其规范制定流程。</p> <p>W3C 也就是万维网联盟（World Wide Web Consortium），又称 W3C 理事会，是万维网的主要国际标准组织。为半自治非政府组织（quasi-autonomous non-governmental organisation）。由 蒂姆·伯纳斯-李（Tim Berners-Lee）于 1994 年 10 月 于麻省理工学院 MIT 计算机科学与人工智能实验室（MIT／LCS）创立。</p> <p>W3C 制定了一系列标准并督促网络应用开发者和内容提供者遵循这些标准。标准的内容包括使用语言的规范，开发中使用的导则和解释引擎的行为等等。W3C 制定了包括 HTML、DOM、SVG、XML 和 CSS 等的众多影响深远的标准规范。</p> <h2 id="w3c-规范制定流程"><a href="#w3c-规范制定流程" class="header-anchor">#</a> W3C 规范制定流程</h2> <p>因为接下来我们需要谈到一些不同阶段的 CSS 规范，因此这里有必要简单介绍一下 W3C 的规范制定流程。</p> <p>按照 W3C 的 Process Document，一个推荐标准的发展需要通过不同的阶段。</p> <figure><img src="/images/2019%E5%B9%B4%EF%BC%8C%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%8A%9B%E5%BC%83CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9F/640-2.webp" alt="An image"><figcaption>An image</figcaption></figure> <p>其中几个主要的阶段分别为：</p> <ul><li>WD 工作草案（Working draft）</li> <li>CR 候选推荐标准（Candidate recommendation）</li> <li>PR 提案推荐标准（recommendation）</li> <li>REC W3C 推荐标准（W3C recommendation）</li></ul> <p>篇幅有限，这里就不详细展开讲解 W3C 的标准流程了，如果想了解更多关于 W3C 标准流程与组织架构 的信息，可以查看 W3C 标准流程与组织架构。</p> <h2 id="css-的历史"><a href="#css-的历史" class="header-anchor">#</a> CSS 的历史</h2> <p>HTML 和 CSS 是那么密不可分，以至于你可能会觉得它们是一起出现的。实际上，自 1989 年 Tim Berners Lie 发明互联网后的多年中，这个世界上都不存在一个名为 CSS 的事物（更别说 CSS 预处理器了），Web 的原始版本根本就没有提供一种装饰网页的方法。</p> <p>HTML 规范虽然规定了网页中的标题、段落应该使用的标签，但是没有涉及这些内容应该以何种样式(比如大小、位置、间距、缩进等属性)呈现在浏览器中。</p> <p>不过，在随后仅短短 10 年后，CSS 就被一个现代的 Web 社区全面采用，这期间的发生了一系列有趣的故事，有兴趣的可以看一下 A Look Back at the History of CSS。</p> <h3 id="css1"><a href="#css1" class="header-anchor">#</a> CSS1</h3> <p>于 1994 年，Håkon Wium Lie (哈肯·维姆·莱) 和 Bert Bos (伯特·波斯) 合作设计 CSS。他们在 1994 年首次在芝加哥的一次会议上第一次展示了 CSS 的建议。</p> <p>1996 年 12 月 发表的 CSS1 的要求有第一版主要规定了选择器、样式属性、伪类 、对象几个大的部分。</p> <h3 id="css2"><a href="#css2" class="header-anchor">#</a> CSS2</h3> <p>CSS2 在 1998 年 5 月 由 W3C 发布，CSS2 规范是基于 CSS1 设计的，扩充和改进了很多更加强大的属性。包括选择器、位置模型、布局、表格样式、媒体类型、伪类、光标样式。</p> <p>Cascading Style Sheets Level 2 Revision 1，通常被称为“ CSS 2.1” ，修复了 CSS 2 中的错误，删除了支持不良或不能完全互操作的特性，并为规范增加了已经实现的浏览器扩展。为了遵守 W3C 标准化技术规范的过程，CSS 2.1 在 Working Draft (WD) 状态和 Candidate Recommendation (CP) 状态之间来回了很多年。</p> <p>CSS 2.1 于 2004 年 2 月 25 日首次成为 Candidate Recommendation (CR)标准，但在 2005 年 6 月 13 日又回到 Working Draft (WD) 中进行进一步审查。它于 2007 年 7 月 19 日回到 Candidate Recommendation (CP) 标准，然后在 2009 年更新了两次。然而，由于作出了修改和澄清，它再次回到了 2010 年 12 月 7 日的 Last Call Working Draft 。</p> <h3 id="css3"><a href="#css3" class="header-anchor">#</a> CSS3</h3> <p>CSS3 是层叠样式表（Cascading Style Sheets）语言的最新版本，旨在扩展 CSS2.1。</p> <p>CSS Level 2 经历了 9 年的时间（从 2002 年 8 月到 2011 年 6 月）才达到 Recommendation（推荐） 状态，主要原因是被一些次要特性拖了后腿。为了加快那些已经确认没有问题的特性的标准化速度，W3C 的 CSS Working Group 作出了一项被称为 Beijing doctrine 的决定，将 CSS 划分为许多小组件，称之为模块。这些模块彼此独立，按照各自的进度来进行标准化。其中一些已经是 W3C Recommendation 状态，也有一些仍是 Early Working Drafts（早期工作草案）。当新的需求被肯定后， 新的模块也会同样地添加进来。</p> <figure><img src="/images/2019%E5%B9%B4%EF%BC%8C%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%8A%9B%E5%BC%83CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9F/640.webp" alt="An image"><figcaption>An image</figcaption></figure> <p>从形式上来说，CSS3 标准自身已经不存在了。每个模块都被独立的标准化，现在标准 CSS 包括了修订后的 CSS2.1 以及完整模块对它的扩充，模块的 level（级别）数并不一致。可以在每个时间点上为 CSS 标准定义一个 snapshots（快照），列出 CSS 2.1 和成熟的模块。</p> <p>W3C 会定期的发布这些 snapshots，如 2007, 2010, 2015 或 2017。</p> <p>目前为止，还没有 level 超过 3 的模块被标准化，未来应该会有所改变。不过有些模块，比如 Selectors（选择器）4 或 CSS Borders and Backgrounds（边框和背景）Level 4 早已拥有了 Editor’s Draft（编辑草案），即使它们还没达到 First Published Working Draft（初次发布工作草案）状态。</p> <p>有一张图可以更加直观的表示当前 CSS3 Modules 的分类和状态：</p> <figure><img src="/images/2019%E5%B9%B4%EF%BC%8C%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%8A%9B%E5%BC%83CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9F/640-1.webp" alt="An image"><figcaption>An image</figcaption></figure> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>There is no single, integrated CSS4 specification, because it is split into separate “level 4” modules.
Level 4 不等于 CSS 4 ，如 CSS Custom Properties for Cascading Variables Module Level 1 总不能说它是 CSS1 吧。</p></div> <h2 id="css-预处理器"><a href="#css-预处理器" class="header-anchor">#</a> CSS 预处理器</h2> <p>CSS 自诞生以来，基本语法和核心机制一直没有本质上的变化，在很长一段时间内，它的发展几乎全是表现力层面上的提升。</p> <p>最开始 CSS 在网页中的作用只是辅助性的装饰，轻便易学是最大的需求；然而如今网站的复杂度已经不可同日而语，原生 CSS 已经让开发者力不从心。</p> <p>当一门语言的能力不足而用户的运行环境又不支持其它选择的时候，这门语言就会沦为 “编译目标” 语言。开发者将选择另一门更高级的语言来进行开发，然后编译到底层语言以便实际运行。于是，在前端领域，天降大任于斯人也，CSS 预处理器应运而生。</p> <h2 id="百花齐放"><a href="#百花齐放" class="header-anchor">#</a> 百花齐放</h2> <p>CSS 预处理器是一个能让你通过预处理器自己独有的语法来生成 CSS 的程序。</p> <p>市面上有很多 CSS 预处理器可供选择，且绝大多数 CSS 预处理器会增加一些原生 CSS 不具备或不完善的高级特性，这些特性让 CSS 的结构更加具有可读性且易于维护。当前社区代表的 CSS 预处理器 主要有一下几种：</p> <p>Sass：2007 年诞生，最早也是最成熟的 CSS 预处理器，拥有 Ruby 社区的支持和 Compass 这一最强大的 CSS 框架，目前受 LESS 影响，已经进化到了全面兼容 CSS 的 SCSS。</p> <p>Less：2009 年出现，受 SASS 的影响较大，但又使用 CSS 的语法，让大部分开发者和设计师更容易上手，在 Ruby 社区之外支持者远超过 SASS，其缺点是比起 SASS 来，可编程功能不够，不过优点是简单和兼容 CSS，反过来也影响了 SASS 演变到了 SCSS 的时代，著名的 Twitter Bootstrap 就是采用 LESS 做底层语言的。</p> <p>Stylus：Stylus 是一个 CSS 的预处理框架，2010 年产生，来自 Node.js 社区，主要用来给 Node 项目进行 CSS 预处理支持，所以 Stylus 是一种新型语言，可以创建健壮的、动态的、富有表现力的 CSS。比较年轻，其本质上做的事情与 SASS/LESS 等类似，</p> <h2 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h2> <p>虽然各种预处理器功能强大，但使用最多的，还是以下特性：变量（variables），代码混合（ mixins），嵌套（nested rules）以及 代码模块化(Modules)。</p> <p>接下来以 Sass 为例，展示一下这几个主要特性在预处理器中的实现：</p> <p><strong>Variables and Operators (+, -, *, /, %)</strong></p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token property"><span class="token variable">$font-size</span></span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token property"><span class="token variable">$font-family</span></span><span class="token punctuation">:</span> Helvetica<span class="token punctuation">,</span> sans <span class="token operator">-</span> serif<span class="token punctuation">;</span>
<span class="token selector">body </span><span class="token punctuation">{</span>
  <span class="token property">font</span><span class="token punctuation">:</span> <span class="token variable">$font</span> <span class="token operator">-</span> size <span class="token variable">$font</span> <span class="token operator">-</span> family<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">. mark </span><span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 1.5 <span class="token operator">*</span> <span class="token variable">$font</span> <span class="token operator">-</span> size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Mixins</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token keyword">@mixin</span> <span class="token selector">clearfix </span><span class="token punctuation">{</span>
  <span class="token selector"><span class="token parent important">&amp;</span>: after </span><span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">. sidebar </span><span class="token punctuation">{</span>
  <span class="token keyword">@include</span> clearfix<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Nesting</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token comment">// menu</span>
<span class="token selector">. nav </span><span class="token punctuation">{</span>
  <span class="token selector">&gt; li </span><span class="token punctuation">{</span>
    <span class="token selector">&gt;
 a
:
hover </span><span class="token punctuation">{</span>
      <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Modules</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token keyword">@import</span> <span class="token string">'./common'</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">'./github-markdown'</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">'./mixin'</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">'./variables'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="缺点或不足"><a href="#缺点或不足" class="header-anchor">#</a> 缺点或不足</h2> <h3 id="额外的编译配置"><a href="#额外的编译配置" class="header-anchor">#</a> 额外的编译配置</h3> <p>在写样式前需要做一些额外的编译配置工作，sass-node 安装以及编译的配置就能卡住一批前端新手。</p> <figure><img src="/images/2019%E5%B9%B4%EF%BC%8C%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%8A%9B%E5%BC%83CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9F/640-3.webp" alt="An image"><figcaption>An image</figcaption></figure> <h3 id="编译成本"><a href="#编译成本" class="header-anchor">#</a> 编译成本</h3> <p>每次修改代码都需要重新编译,占用时间和 CPU。</p> <figure><img src="/images/2019%E5%B9%B4%EF%BC%8C%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%8A%9B%E5%BC%83CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9F/640-4.webp" alt="An image"><figcaption>An image</figcaption></figure> <h2 id="学习成本"><a href="#学习成本" class="header-anchor">#</a> 学习成本</h2> <p>不同的 CSS 预处理器语法不同，增加学习成本。在同一个团队甚至项目里，可能同时使用了好几种样式预处理器。</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token comment">// Sass</span>
<span class="token property"><span class="token variable">$color</span></span><span class="token punctuation">:</span> #f00<span class="token punctuation">;</span>
<span class="token property"><span class="token variable">$img</span></span><span class="token punctuation">:</span> <span class="token string">'../img'</span><span class="token punctuation">;</span>
<span class="token keyword">@mixin</span> <span class="token selector">clearfix </span><span class="token punctuation">{</span>
  <span class="token selector"><span class="token parent important">&amp;</span>: after </span><span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">' '</span><span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">body </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">$color</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> url <span class="token punctuation">(</span><span class="token string">'#{img}/1.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">@include</span> clearfix<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-less extra-class"><pre class="language-less"><code><span class="token comment">// Less</span>
<span class="token variable">@color<span class="token punctuation">:</span></span> #f00<span class="token punctuation">;</span>
<span class="token variable">@images<span class="token punctuation">:</span></span> <span class="token string">'../img'</span><span class="token punctuation">;</span>
<span class="token selector">. clearfix ()</span> <span class="token punctuation">{</span>
  <span class="token selector">&amp;:
after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">' '</span><span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@color</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> url <span class="token punctuation">(</span><span class="token string">'@{img}/1.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  . clearfix<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="调试"><a href="#调试" class="header-anchor">#</a> 调试</h2> <p>在使用 CSS 预处理器时，我们通常会配置 SourceMap 来辅助调试，但即使这样，还是会碰到一些调试困难的情况</p> <figure><img src="/images/2019%E5%B9%B4%EF%BC%8C%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%8A%9B%E5%BC%83CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9F/640.gif" alt="An image"><figcaption>An image</figcaption></figure> <h2 id="回归-css"><a href="#回归-css" class="header-anchor">#</a> 回归 CSS</h2> <p>各种 CSS 预处理器在更新迭代的过程中，功能越来越繁杂花哨，但是绝大部分人用到的核心功能还是那几样：Variables、Mixing、Nested、Module，顶多再加上一些工具类函数。</p> <p>我们既想要想要预处理器的优点，又不想要它带来的成本和缺点，有没有两全其美的办法？CSS 这么多年一直也在从社区汲取养分加速进化和迭代，我们能不能从 CSS 标准里面找到答案呢？</p> <h3 id="variables-in-css"><a href="#variables-in-css" class="header-anchor">#</a> Variables in CSS</h3> <p>CSS 自定义属性（CSS Custom Properties)，又叫 CSS 变量（CSS Variable）,允许你自己在样式中声明变量，并通过 var() 函数使用。</p> <p>CSS Custom Properties for Cascading Variables 规范在 2012 年 10 月首次作为 工作草案（WD） 提出，并在 2015 年 10 月到达 候选人推荐标准（CR）阶段。现在浏览器支持程度已经接近 93%。</p> <figure><img src="/images/2019%E5%B9%B4%EF%BC%8C%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%8A%9B%E5%BC%83CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9F/640-5.webp" alt="An image"><figcaption>An image</figcaption></figure> <p>CSS 变量定义及使用如下所示，可定义的类型极其丰富。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* declaration */</span>
<span class="token property">--VAR_NAME</span><span class="token punctuation">:</span> &lt; declaration - value &gt;<span class="token punctuation">;</span>
<span class="token comment">/* usage */</span>
var <span class="token punctuation">(</span>--VAR_NAME<span class="token punctuation">)</span>
<span class="token comment">/* root element selector (global scope), e.g. &lt;html&gt; */</span>
<span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token comment">/* CSS variables declarations */</span>
  <span class="token property">--main-color</span><span class="token punctuation">:</span> #ff00ff<span class="token punctuation">;</span>
  <span class="token property">--main-bg</span><span class="token punctuation">:</span> rgb <span class="token punctuation">(</span>200<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--logo-border-color</span><span class="token punctuation">:</span> rebeccapurple<span class="token punctuation">;</span>
  <span class="token property">--header-height</span><span class="token punctuation">:</span> 68px<span class="token punctuation">;</span>
  <span class="token property">--content-padding</span><span class="token punctuation">:</span> 10px 20px<span class="token punctuation">;</span>
  <span class="token property">--base-line-height</span><span class="token punctuation">:</span> 1.428571429<span class="token punctuation">;</span>
  <span class="token property">--transition-duration</span><span class="token punctuation">:</span> . 35s<span class="token punctuation">;</span>
  <span class="token property">--external-link</span><span class="token punctuation">:</span> <span class="token string">'external link'</span><span class="token punctuation">;</span>
  <span class="token property">--margin-top</span><span class="token punctuation">:</span> calc <span class="token punctuation">(</span>2vh + 20px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token comment">/* use the variable */</span>
  <span class="token property">color</span><span class="token punctuation">:</span> var <span class="token punctuation">(</span>-- main - color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>不同于 SASS 预处理器变量的编译时处理，CSS 变量是浏览器在运行时进行处理的，因此 CSS 变量会更加强大和灵活。</p> <h3 id="operators"><a href="#operators" class="header-anchor">#</a> Operators</h3> <p>可以使用 calc() 进行计算</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token selector">:root </span><span class="token punctuation">{</span>
  <span class="token property">--block-font-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">. block__highlight </span><span class="token punctuation">{</span>
  <span class="token comment">/* WORKS */</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> calc <span class="token punctuation">(</span>var <span class="token punctuation">(</span>-- block <span class="token operator">-</span> font <span class="token operator">-</span> size<span class="token punctuation">)</span> <span class="token operator">*</span> 1.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="generate-colors"><a href="#generate-colors" class="header-anchor">#</a> Generate Colors</h2> <p>可以用于通过 RGB 等函数生成和计算颜色：Generate Colors</p> <figure><img src="/images/2019%E5%B9%B4%EF%BC%8C%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%8A%9B%E5%BC%83CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9F/640-1.gif" alt="An image"><figcaption>An image</figcaption></figure> <h3 id="css-to-js"><a href="#css-to-js" class="header-anchor">#</a> CSS to JS</h3> <p>CSS 变量出现前，从 CSS 传值给 JS 非常困难，甚至需要借助一些 Hack 的手法。现在使用 CSS 变量，你可以直接通过 JS 获取变量值并进行修改：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.breakpoints-data</span> <span class="token punctuation">{</span>
  <span class="token property">--phone</span><span class="token punctuation">:</span> 480px<span class="token punctuation">;</span>
  <span class="token property">--tablet</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> breakpointsData <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.breakpoints-data'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// GET</span>
<span class="token keyword">const</span> phone <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>breakpointsData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">'--phone'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// SET</span>
breakpointsData<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--phone'</span><span class="token punctuation">,</span> <span class="token string">'custom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="custom-theme"><a href="#custom-theme" class="header-anchor">#</a> Custom Theme</h2> <p>使用 CSS 变量，定制和动态切换网站主题非常简单方便：</p> <p>首先定义好不同主题下的变量，然后正常书写样式即可。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">html</span> <span class="token punctuation">{</span>
  <span class="token property">--hue</span><span class="token punctuation">:</span> 210<span class="token punctuation">;</span>
  <span class="token comment">/* Blue */</span>
  <span class="token property">--text-color-normal</span><span class="token punctuation">:</span> hsl <span class="token punctuation">(</span>var <span class="token punctuation">(</span>-- hue<span class="token punctuation">)</span><span class="token punctuation">,</span> 77 %<span class="token punctuation">,</span> 17 %<span class="token punctuation">)</span><span class="token punctuation">;</span>
  ...<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">html [data-theme='dark']</span> <span class="token punctuation">{</span>
  <span class="token property">--text-color-normal</span><span class="token punctuation">:</span> hsl <span class="token punctuation">(</span>var <span class="token punctuation">(</span>-- hue<span class="token punctuation">)</span><span class="token punctuation">,</span> 10 %<span class="token punctuation">,</span> 62 %<span class="token punctuation">)</span><span class="token punctuation">;</span>
  ...<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过 JS 改变元素属性，动态切换主题：</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-theme'</span><span class="token punctuation">,</span> <span class="token string">'dark'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-theme'</span><span class="token punctuation">,</span> <span class="token string">'light'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><figure><img src="/images/2019%E5%B9%B4%EF%BC%8C%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%8A%9B%E5%BC%83CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9F/640-2.gif" alt="An image"><figcaption>An image</figcaption></figure> <p>更多高级用法可以参考：CSS custom properties (native variables) In-Depth</p> <p>为什么变量的定义以 --开头？原因在这里：Let’s Talk about CSS Variables</p> <h2 id="mixins-in-css"><a href="#mixins-in-css" class="header-anchor">#</a> Mixins in CSS</h2> <p>CSS 的有一个提案：CSS @apply Rule，按照该草案描述，用户可直接使用 CSS 变量存放声明块，然后通过 @apply rule 使用。</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token selector">:root </span><span class="token punctuation">{</span>
  <span class="token selector">--pink-schema: </span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #6a8759<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #f64778<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">body </span><span class="token punctuation">{</span>
  @apply --pink-schema<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可惜这个提案已被废弃，具体废弃原因感兴趣的可以看看这篇文章：Why I Abandoned @apply。</p> <p>尽管 Mixins 现在 CSS 还没有好的实现标准，但我们坚信迟早会有更优秀的规范涌现出来弥补 CSS 的这一块空白。</p> <h2 id="nesting-in-css"><a href="#nesting-in-css" class="header-anchor">#</a> Nesting in CSS</h2> <p>CSS 里已经有 Nesting 的规范出现，尽管现在只处于 Editor’s Draft 阶段：CSS Nesting Module Level 3</p> <p>可以看到按照 CSS Nesting Module ，Nesting 规范基本和预处理器一模一样。</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token comment">/* Dropdown menu on hover */</span>
<span class="token selector">ul </span><span class="token punctuation">{</span>
  <span class="token comment">/* direct nesting (&amp; MUST be the first part of selector)*/</span>
  <span class="token selector"><span class="token parent important">&amp;</span> &gt; li </span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token selector"><span class="token parent important">&amp;</span> &gt; ul </span><span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector"><span class="token parent important">&amp;</span>: hover </span><span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #f00<span class="token punctuation">;</span>
      <span class="token selector"><span class="token parent important">&amp;</span> &gt; ul </span><span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="module-in-css"><a href="#module-in-css" class="header-anchor">#</a> Module in CSS</h2> <p>其实 CSS 很早就有了模块化方案，那就是 @import，使用 CSS 的 @import 规则，可以引用其他的文件样式。这个特性从 IE 5.5 开始就被所有的浏览器支持，那为什么一直以来使用者寥寥无几呢，原因很多：</p> <ul><li>在一些老的浏览器有加载顺序的 bug</li> <li>无法并行加载</li> <li>导致过多的请求数量</li> <li>…</li></ul> <p>不过现在大家的前端项目基本都会使用构建工具（Gulp、Webpack 等）打包后再上线，因此以上哪些缺点也就不存在了，而在 Webpack 的 css-loader 中，是可以配置是否开启 @import 的。</p> <figure><img src="/images/2019%E5%B9%B4%EF%BC%8C%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%8A%9B%E5%BC%83CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9F/640-6.webp" alt="An image"><figcaption>An image</figcaption></figure> <h2 id="selector-helpers"><a href="#selector-helpers" class="header-anchor">#</a> Selector Helpers</h2> <p>除了上面介绍的一些主要特性，CSS 还提供了一些全新的特性来帮助你更优雅的书写样式。</p> <h2 id="matches-pseudo-class"><a href="#matches-pseudo-class" class="header-anchor">#</a> :matches pseudo-class</h2> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>已更名为 :is()</p></div> <p>:matches() CSS 伪类 函数将选择器列表作为参数，并选择该列表中任意一个选择器可以选择的元素，这对于以更紧凑的形式编写大型选择器非常有用，而且浏览器支持程度也已经接近 93%。</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token comment">/* 语法 */</span>
<span class="token punctuation">:</span><span class="token function">matches</span><span class="token punctuation">(</span>selector[<span class="token punctuation">,</span>selector]*<span class="token punctuation">)</span> <span class="token punctuation">;</span>
</code></pre></div><div class="language-scss extra-class"><pre class="language-scss"><code>.<span class="token property">nav</span><span class="token punctuation">:</span><span class="token function">matches</span><span class="token punctuation">(</span>.side<span class="token punctuation">,</span> .top<span class="token punctuation">)</span>.<span class="token property">links</span><span class="token punctuation">:</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token punctuation">:</span>hover<span class="token punctuation">,</span> <span class="token punctuation">:</span>focus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #bada55<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 相当于以下代码 */</span>
<span class="token selector">.nav.side.links:hover,
.nav.top.links:hover,
.nav.side.links:focus,
.nav.top.links:focus </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #bada55<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>想要了解更多详情可以查看规范：Selectors Level 4</p> <h2 id="custom-selector"><a href="#custom-selector" class="header-anchor">#</a> @custom-selector</h2> <p>同时，你还可以您可以使用自定义选择器来定义可以匹配复杂选择器的别名。</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token comment">/* 语法 */</span>
@custom <span class="token property">-selector</span><span class="token punctuation">:</span>
&lt;custom-selector&gt;
&lt;selector-list&gt;<span class="token punctuation">;</span>
</code></pre></div><p>定义的方式和 CSS 变量类似，使用起来稍微有点区别。</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token atrule"><span class="token rule">@custom</span> <span class="token property">-selector</span> <span class="token punctuation">:</span>--text-inputs input[type=<span class="token string">&quot;text&quot;</span>]<span class="token punctuation">,</span>
input[type=<span class="token string">&quot;password&quot;</span>]<span class="token punctuation">;</span>
<span class="token punctuation">:</span>--text-inputs .disabled<span class="token punctuation">,</span>
<span class="token punctuation">:</span>--text-inputs [disabled]</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 相当于以下代码 */</span>
<span class="token selector">input [type='text'] .disabled,
input [type='password'] .disabled,
input [type='text'][disabled],
input [type='password'][disabled] </span><span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="用起来"><a href="#用起来" class="header-anchor">#</a> 用起来</h2> <p>尽管上述的 CSS 特性还处于不同阶段，浏览器的支持程度也不尽相同，但是使用 postcss-preset-env，你就可以抢先尝试 CSS 的最新特性。</p> <p>当然，postcss-preset-env 的配置也十分简单，以 Webpack 为例：</p> <div class="language-js extra-class"><pre class="language-js"><code>rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span><span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
  use<span class="token operator">:</span><span class="token punctuation">[</span>
  <span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>loader<span class="token operator">:</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span> options<span class="token operator">:</span><span class="token punctuation">{</span>importLoaders<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>loader<span class="token operator">:</span><span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>options<span class="token operator">:</span><span class="token punctuation">{</span>
    ident<span class="token operator">:</span><span class="token string">'postcss'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">plugins</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span>
      <span class="token function">postcssPresetEnv</span><span class="token punctuation">(</span><span class="token comment">/* pluginOptions */</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>经过一番梳理，我们发现，尽管 CSS 在社区的刺激下加快了更新迭代的速度，但是到目前为止，依然达不到 CSS 预处理器 VS CSS 的地步，只能说在使用 CSS 预处理器的同时，也可以在项目中尝试一些优秀的 CSS 新特性，即：CSS 预处理器 + CSS。</p> <p>但是我们依然坚信，在 W3C 的推动下，随着 CSS 自身不断完善，CSS 预处理器终究会像当年的 CoffeScript 、Jade 一样，变成时代的过渡产物。到那时候，大家也就不用纠结各种 CSS 预处理器的环境配置和技术选型等，直接打开编辑器，就能愉快的书写样式。</p> <p><a href="https://mp.weixin.qq.com/s/tqLlWuKPrpp-fyU5PPXveA" target="_blank" rel="noopener noreferrer">2019 年，是否可以抛弃 CSS 预处理器？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div></div></div> <div id="shangfang" class="column no-pad-r sm-25 xl-33 xsNone smNone post-sidebar"><!----> <div class="table-contents-fixed"><h3 id="table-of-content" class="table-contents__title">浮动目录</h3> <nav><ol class="table-contents__list"></ol></nav></div></div> <aside id="dibujuli" class="column xs-100"><hr class="divider"> <div><div class="observer" data-v-48c5c728><!----> <!----> <!----></div></div> <hr class="divider"> <section class="post-content__disqus"><!----></section></aside></div></section></article></div> <section class="row section-newsletter justify-center newsletter-post-wrap"><div class="column sm-100 md-67 xl-50"><div class="newsletter not-black"><span class="meta-text meta-text--primary not-black">关注我们</span> <h2 class="newsletter__title not-black">在收件箱接收新的内容推送</h2> <form method="post" action="https://luzhaoyang.us4.list-manage.com/subscribe/post?u=1de83ba90307cf0e38650d622&amp;amp;id=04aeba270a" class="newsletter__form not-black"><label for="email_news-1581168393265" class="newsletter__label not-black"><input type="email" name="EMAIL" id="email_news-1581168393265" required="required" placeholder="在这里输入您的电子邮件" autocomplete="off" aria-label="在这里输入您的电子邮件" value="" class="ui-input-field reset-input newsletter__input"></label> <button type="submit" class="ui-button reset-button newsletter__button txt-upper ui-button--primary">
        订阅
      </button></form></div></div></section> <aside class="container main"></aside></div> <!----> <div class="elevator"><a class="elevator__link"><span class="icon elevator__icon icon-greaterthan"></span> <!----></a></div> <!----></div></main> <footer id="footer" class="footer "><div class="footer-box1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1366 161" class="footer-box__shape"><path d="M-11.925-4809v-154.746c40.454,19.75,273.683,130.936,420.544,142.612,161.25,12.821,339.978-42.709,521.543-86.3,169.82-40.769,395.43,29.2,423.912,38.429v60Z" transform="translate(11.926 4970)"></path></svg></div> <div class="footer-box2"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1366 246" class="footer-box__shape"><path d="M-1505.5-4725.5v-238.1c8.149-3.133,18.138-5.059,29.672-5.9h30.954c201.21,11.667,696.6,224.535,855.572,236.458,205.129,15.385,287.179-164.1,432.047-175.625a42.381,42.381,0,0,1,16.756,1.857V-4725.5Z" transform="translate(1506 4971)"></path></svg> <ul class="footer-social__list"><li class="footer-social__item"><a href="https://i.youku.com/i/UNTcyNDQ2ODky?spm=a2hbt.13141534.1_1.1" target="_blank" rel="noopener external" title="Follow us on Facebook"><span class="icon footer-social__icon icon-youku"></span></a></li><li class="footer-social__item"><a href="https://weibo.com/3032335637/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo" target="_blank" rel="noopener external" title="Follow us on Facebook"><span class="icon footer-social__icon icon-sina"></span></a></li><li class="footer-social__item"><a href="https://space.bilibili.com/25739142" target="_blank" rel="noopener external" title="Follow us on Facebook"><span class="icon footer-social__icon icon-bilibili"></span></a></li></ul> <div class="footer-newsletter not-black"><div class="newsletter not-black"><span class="meta-text meta-text--primary not-black">关注我们</span> <h2 class="newsletter__title not-black">在收件箱接收新的内容推送</h2> <form method="post" action="https://luzhaoyang.us4.list-manage.com/subscribe/post?u=1de83ba90307cf0e38650d622&amp;amp;id=04aeba270a" class="newsletter__form not-black"><label for="email_news-1581168393273" class="newsletter__label not-black"><input type="email" name="EMAIL" id="email_news-1581168393273" required="required" placeholder="在这里输入您的电子邮件" autocomplete="off" aria-label="在这里输入您的电子邮件" value="" class="ui-input-field reset-input newsletter__input"></label> <button type="submit" class="ui-button reset-button newsletter__button txt-upper ui-button--primary">
        订阅
      </button></form></div></div></div> <section class="footer-box3"><div class="row"><div class="column sm-50 footer-card"><div class="observer" data-v-48c5c728><div class="spinner observer__spinner" data-v-48c5c728><div class="double-bounce1"></div> <div class="double-bounce2"></div></div> <!----> <!----></div></div> <div class="column sm-50 footer-nav"><div class="row justify-right"><div class="column xs-50 sm-40 md-33 footer-nav__box footer-nav__box--1 not-black"><h2 class="meta-text title not-black">我的小窝</h2> <nav class="footer-nav1"><ul><li class="footer-nav1__item"><a href="/zh/categories/" class="not-black">文章分类</a> <!----></li><li class="footer-nav1__item"><a href="/zh/gallery/" class="not-black">摄影相册</a> <!----></li><!----><li class="footer-nav1__item"><a href="/zh/travel/" class="not-black">旅行简记</a> <!----></li><li class="footer-nav1__item"><a href="/zh/about/" class="not-black">关于我们</a> <!----></li><li class="footer-nav1__item"><a href="/zh/contact/" class="not-black">联系我们</a> <!----></li></ul></nav></div> <div class="column xs-50 sm-40 md-33 footer-nav__box footer-nav__box--2"><h2 class="meta-text title not-black">社区</h2> <nav class="footer-nav2"><ul><li class="footer-nav2__item"><!----> <a href="https://jq.qq.com/?_wv=1027&amp;k=5sOoWzp" rel="noopener nofollow" target="_blank" class="not-black">Q群 931024509</a></li><li class="footer-nav2__item"><!----> <a href="https://nativescript-vue-examples.luzhaoyang.com/" rel="noopener nofollow" target="_blank" class="not-black">NSVue 示例</a></li><li class="footer-nav2__item"><!----> <a href="https://marketplace.visualstudio.com/items?itemName=nuochong.nativescript-vue-extend" rel="noopener nofollow" target="_blank" class="not-black">NSVue 扩展</a></li></ul></nav></div></div></div> <div class="cpolumn sm-100 footer-copy"><p data-v-8d1f1b8e><span data-v-8d1f1b8e>累计访问</span> <span data-v-8d1f1b8e></span>
  次
</p> <p>2018 - 2020 © NUOCHONG - 源于 
  <a href="https://github.com/" rel="noopener" target="_blank">
    GITHUB
  </a></p></div></div> <span class="shapes shapes--circle" style="left: 3%; top: -20%"></span> <span class="shapes shapes--primary shapes--color3" style="left: 30%; top: -15%"></span> <span class="shapes shapes--primary" style="left: 13%; top: -80%; transform: rotate(45deg)"></span> <span class="shapes shapes--circle shapes--color4" style="left: 40%; top: 200px"></span> <span class="shapes shapes--primary" style="left: 15%; bottom: 10%; transform: rotate(75deg)"></span> <span class="shapes shapes--circle shapes--color3" style="right: 50%; top: 30%"></span> <span class="shapes shapes--primary" style="right: 20%; top: -100%"></span> <span class="shapes shapes--circle" style="right: 10%; top: -20%"></span> <span class="shapes shapes--color4" style="right: 35%; top: -20%; transform: rotate(45deg)"></span> <span class="shapes shapes--circle" style="left: 40%; top: -50%"></span> <span class="shapes shapes--color3" style="right: 30%; top: 20%"></span> <span class="shapes shapes--circle shapes--primary" style="right: 30%; bottom: 20%"></span></section></footer></div> <!----> <!----></div><div class="global-ui"><div><!----> <!----></div></div></div>
    <script src="/assets/js/app.195f3b74.js" defer></script><script src="/assets/js/17.77324870.js" defer></script><script src="/assets/js/4.e00acd61.js" defer></script><script src="/assets/js/16.6feccbdc.js" defer></script><script src="/assets/js/15.867f2ef3.js" defer></script><script src="/assets/js/23.1f788c7a.js" defer></script><script src="/assets/js/0.0e34bbc8.js" defer></script><script src="/assets/js/5.c605b54d.js" defer></script><script src="/assets/js/3.8a5b8f76.js" defer></script><script src="/assets/js/20.a4630952.js" defer></script><script src="/assets/js/58.fa4b6c8c.js" defer></script><script src="/assets/js/6.c6fdf831.js" defer></script><script src="/assets/js/13.5bfa9682.js" defer></script><script src="/assets/js/1.4920de8d.js" defer></script><script src="/assets/js/11.8304f194.js" defer></script><script src="/assets/js/18.8bf7acfe.js" defer></script><script src="/assets/js/2.ce2db3a2.js" defer></script>
  </body>
</html>
