(window.webpackJsonp=window.webpackJsonp||[]).push([[258],{2447:function(t,s,a){"use strict";a.r(s);var n=a(4),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),n("p",[t._v("对于一套好看舒适的前端设计方案，风格统一是基本要求，其中必然包括字体的统一。")]),t._v(" "),n("p",[t._v("由于国产化进程的不断推进，冒出了不少基于 Linux 的国产操作系统，这就导致我们平时在 windows 上使用得好好的字体，在这些国产操作系统上就失效了，其原因是这些操作系统上没有安装对应的字体。")]),t._v(" "),n("p",[t._v("在这里，我就记录一下最近解决字体问题的一次过程。")]),t._v(" "),n("h2",{attrs:{id:"现象"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#现象"}},[t._v("#")]),t._v(" 现象")]),t._v(" "),n("p",[t._v("某客户在某国产系统上运行我们的项目时，脚本编辑器中出现了光标错位的问题。")]),t._v(" "),n("h2",{attrs:{id:"分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#分析"}},[t._v("#")]),t._v(" 分析")]),t._v(" "),n("p",[t._v("我们的项目中用到了 ace_editor 脚本编辑器，通过阅读源码得知，它在计算光标位置时，依靠的是字体宽度，这就要求必须使用等宽字体才行，否则，会因计算位置错误而引起光标错位。")]),t._v(" "),n("p",[t._v("引起上述现象的原因，说白了就是客户所使用的的操作系统中，没有安装我们项目脚本编辑器所需要的字体。")]),t._v(" "),n("h2",{attrs:{id:"css-字体知识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#css-字体知识"}},[t._v("#")]),t._v(" CSS 字体知识")]),t._v(" "),n("p",[t._v("熟悉 CSS 的同学应该都知道，我们可以通过 CSS 引入字体文件并定义字体名称，比如：")]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// font.css")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 定义字体名称、引入等宽字体文件 */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token atrule"}},[n("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@font-face")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-family")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bianchengsanmei'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token url"}},[t._v("url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./font/bianchengsanmei.ttf'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 使用字体 */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".div ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-family")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bianchengsanmei'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 14px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-weight")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" normal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"解决方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[t._v("#")]),t._v(" 解决方案")]),t._v(" "),n("p",[t._v("针对上述问题，我们的解决方案包括以下步骤：\n"),n("strong",[t._v("第一步")]),t._v("：在网上下载等宽字体文件，在这里我们选择的是 JetBrainsMono 字体；\n"),n("strong",[t._v("第二步")]),t._v("：挑选合适的字体文件，本文中选择的是 "),n("code",[t._v("JetBrainsMono-Regular.ttf")]),t._v(" ：\n"),n("img",{attrs:{src:a(845),alt:""}}),t._v(" "),n("strong",[t._v("第三步")]),t._v("：将 "),n("code",[t._v("JetBrainsMono-Regular.ttf")]),t._v(" 拷贝至 "),n("code",[t._v("./css/font/")]),t._v(" 路径下，并在 CSS 文件中引入和使用：")]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ./css/font.css")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 定义字体名称、引入等宽字体文件 */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token atrule"}},[n("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@font-face")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-family")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'JetBrainsMono-Regular'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token url"}},[t._v("url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./font/JetBrainsMono-Regular.ttf'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 使用字体 */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".div ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-family")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'JetBrainsMono-Regular'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 14px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-weight")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" normal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"结果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#结果"}},[t._v("#")]),t._v(" 结果")]),t._v(" "),n("p",[t._v("刷新页面后，重新测试，发现脚本编辑器中的字体显示为等宽字体，且光标位置也显示正常，问题得到解决。")]),t._v(" "),n("h2",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),n("p",[t._v("以上的解决方案应该是最常见最普遍的字体问题解决方案，以后遇到类似的问题都可以参考这个解决。")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/7058254960483368990",target:"_blank",rel:"noopener noreferrer"}},[t._v("平台字体适应问题"),n("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=r.exports}}]);