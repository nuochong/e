(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{2014:function(s,a,t){"use strict";t.r(a);var n=t(3),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("figure",[n("img",{staticClass:"md-image",attrs:{src:t(441),alt:""}}),n("figcaption",[s._v("章节配图")])]),s._v(" "),n("p",[s._v("NPM，Node Package Manager，是 "),n("code",[s._v("JavaScript")]),s._v(" 编程语言的软件包管理器。任何使用 "),n("code",[s._v("Javascript")]),s._v(" 的开发人员都使用过这个出色的 CLI 工具来为他们的项目安装依赖项。")]),s._v(" "),n("p",[s._v("在这篇文章中，我将分享 NPM 的技巧和诀窍，它们可以提高你的工作效率，让你更明智、更高效地使用 NPM。")]),s._v(" "),n("h2",{attrs:{id:"_1-初始化包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-初始化包"}},[s._v("#")]),s._v(" 1. 初始化包")]),s._v(" "),n("p",[s._v("我们可以运行 "),n("code",[s._v("npm init")]),s._v("命令来初始化包，但是它会询问关于包、作者等信息。还有另一种方法可以使用 "),n("code",[s._v("npm init -y")]),s._v(" 命令自动生成我们的 "),n("code",[s._v("package.json")]),s._v(" 。")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init -y\n")])])]),n("p",[s._v("我们还可以使用 "),n("code",[s._v("npm config")]),s._v(" 命令设置一些默认的初始化配置，例如作者详细信息等。")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init-author-name "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ankit Jain"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init-author-email "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ankitjain28may77@gmail.com"')]),s._v("\n")])])]),n("p",[s._v("然后运行 "),n("code",[s._v("npm init -y")]),s._v(" 自动生成我们的包:")]),s._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<name of the root dir>"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"description"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"keywords"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"author"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ankit Jain <ankitjain28may77@gmail.com>"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"license"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ISC"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("p",[s._v("我们还可以使用 "),n("code",[s._v("npm config")]),s._v(" 配置自己的 "),n("code",[s._v("javascript")]),s._v(" 文件来扩展 "),n("code",[s._v("npm init")]),s._v(" 的功能：")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init-module "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path-of-the-custom-file"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),n("h2",{attrs:{id:"_2-从不同源安装包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-从不同源安装包"}},[s._v("#")]),s._v(" 2. 从不同源安装包")]),s._v(" "),n("p",[s._v("NPM CLI 还允许从其他来源（例如 "),n("code",[s._v("Bit")]),s._v(" "),n("code",[s._v("，tarball")]),s._v(" "),n("code",[s._v("文件，GitHub")]),s._v(" "),n("code",[s._v("，Bitbucket")]),s._v(" 和 "),n("code",[s._v("gist")]),s._v(" ）安装 "),n("code",[s._v("javascript")]),s._v(" 包。")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install a component from Bit (set Bit as a scoped registry)")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" @bit:registry https://node.bit.dev\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i @bit/username.collection.component\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install from tarball stored locally")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i ./local-tarball-package.tgz\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install tarball package from internet")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i https://abc/xyz/package.tar.gz\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install from github repo")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i githubuser/reponame\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install from bitbucket repo")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i bitbucket:bitbucketuser/reponame\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install from gist")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i gist:gistID\n")])])]),n("p",[n("strong",[s._v("例如：从 Bit 安装按钮组件")]),s._v("\n假设我需要一个按钮组件，而我的一个队友已经按钮组件发布到我们在 Bit 上的组件集合上了。")]),s._v(" "),n("p",[s._v("首先，将 Bit 配置为"),n("code",[s._v("scope")]),s._v(" （范围包）")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" @bit:registry https://node.bit.dev\n")])])]),n("p",[s._v("然后，我将转到我团队的组件集中寻找按钮：")]),s._v(" "),n("figure",[n("img",{staticClass:"md-image",attrs:{src:t(442),alt:""}}),n("figcaption",[s._v("章节配图")])]),s._v(" "),n("p",[s._v("找到 "),n("code",[s._v("button")]),s._v(" 组件，复制安装命令，使用 NPM 进行安装")]),s._v(" "),n("figure",[n("img",{staticClass:"md-image",attrs:{src:t(443),alt:""}}),n("figcaption",[s._v("章节配图")])]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i @bit/the_a-team.imperfect-components.button\n")])])]),n("blockquote",[n("p",[s._v("我的团队的名称：“ The A-Team”。我们的组件集名称：“Imperfect Components”。")])]),s._v(" "),n("p",[s._v("例如：从 npm 企业私库安装 "),n("code",[s._v("Icon")]),s._v(" 组件\n例如，我需要在项目中安装一个 "),n("code",[s._v("Icon")]),s._v(" 组件，而我的一个队友已经将按钮组件发布到 npm 企业私库上了。")]),s._v(" "),n("p",[s._v("我们同样可以使用 scope 和企业私库关联起来。这样你就可以同时使用 npm 公共仓库和一些其他的私有仓库中的模块:")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" @xscope:registry https://xxx.com/npm/\n")])])]),n("p",[n("strong",[s._v("多源安装：用户无感知")]),s._v("\n每次用户使用私有库的时候都需要切换 npm 镜像路径，利用 "),n("code",[s._v("npm preinstall")]),s._v(" 的钩子，项目的 "),n("code",[s._v("package.json")]),s._v(" 里增加"),n("code",[s._v("preinstall")]),s._v(" 要执行的脚本，这样合作方可以无感知的安装:")]),s._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在执行 npm install 命令前，npm 会自动执行 npm preinstall 钩子")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"preinstall"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node ./bin/preinstall.js"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("p",[s._v("配置 "),n("code",[s._v("./bin/preinstall.js")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" exec "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'child_process'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("exec")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'npm config get registry'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" stdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" stderr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("stdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("match")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("registry\\.x\\.com")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("exec")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'  npm config set @xscope:registry https://xxx.com/npm/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),n("h2",{attrs:{id:"_3-全新安装依赖包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-全新安装依赖包"}},[s._v("#")]),s._v(" 3.全新安装依赖包")]),s._v(" "),n("p",[s._v("我们可以运行 "),n("code",[s._v("npm ci")]),s._v(" 来全新安装我们的软件依赖包。它通常用于 CI / CD 平台等自动化环境。")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" ci\n")])])]),n("p",[s._v("它与 "),n("code",[s._v("npm install")]),s._v(" 在以下方面不同：")]),s._v(" "),n("ul",[n("li",[s._v("它会根据"),n("code",[s._v("package-lock.json")]),s._v(" 安装依赖包，这可以保证整个开发团队都使用版本完全一致的依赖，避免把时间浪费在排查因为依赖不一致而导致的各种奇怪问题上")]),s._v(" "),n("li",[s._v("它会安装 "),n("code",[s._v("package-lock.json")]),s._v(" 文件中提到的软件包的确切版本，无需计算求解依赖满足问题，在大多数情况下都可以大大加速 node 模块安装过程")]),s._v(" "),n("li",[s._v("它会先删除项目中现有的 "),n("code",[s._v("node_modules")]),s._v(" ，然后全新安装")]),s._v(" "),n("li",[s._v("它不会写入 "),n("code",[s._v("package.json")]),s._v(" 或任何包锁：安装基本上是冻结的")]),s._v(" "),n("li",[n("code",[s._v("npm install")]),s._v(" 可以安装单个依赖包，"),n("code",[s._v("npm ci")]),s._v(" 只能一次安装整个项目所以依赖包，无法安装单个依赖包")])]),s._v(" "),n("p",[s._v("另外，如果 "),n("code",[s._v("package-lock.json")]),s._v(" 过时（和 "),n("code",[s._v("package.json")]),s._v(" 冲突），那么 "),n("code",[s._v("npm ci")]),s._v(" 会很贴心地报错，避免项目依赖陷入过时状态。")]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),n("p",[s._v("注意： 如果你使用 "),n("code",[s._v("npm ci")]),s._v("，别忘了把 "),n("code",[s._v("package-lock.json")]),s._v(" 加入 git 仓库。")])]),s._v(" "),n("h2",{attrs:{id:"_4-使用快捷方式安装包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-使用快捷方式安装包"}},[s._v("#")]),s._v(" 4.使用快捷方式安装包")]),s._v(" "),n("p",[s._v("这是最有用的功能，可用于节省安装软件包时的时间：")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install package")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nShortcut: "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install devDependencies")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save-dev "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nShortcut: "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -D "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install dependencies (This is default)")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save-prod "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nShortcut: "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -P "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install packages globally")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --global "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nShortcut: "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -g "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),n("p",[s._v("在一个命令中安装多个包：")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i express cheerio axios\n")])])]),n("p",[s._v("安装具有相同前缀的多个包：")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i eslint-"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("plugin-import,plugin-react,loader"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" express\n")])])]),n("h2",{attrs:{id:"_5-npm-scripts"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-npm-scripts"}},[s._v("#")]),s._v(" 5. NPM scripts")]),s._v(" "),n("p",[s._v("NPM scripts 是最有用的功能。除了预定义的前后钩子（通常称为生命周期脚本）外，它还支持自定义脚本，例如：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("preinstall")]),s._v(" ：它会在安装任何依赖包之前运行")])]),s._v(" "),n("p",[s._v("我们还可以在项目中运行 "),n("code",[s._v("npm run env")]),s._v(" ，列出项目中存在的所有 npm 环境变量。包括以 "),n("code",[s._v("npm_package_")]),s._v(" 为前缀的包属性。")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v("\n")])])]),n("p",[s._v("输出：")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("npm_config_save_dev")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("npm_config_legacy_bundling")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("npm_config_dry_run")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("npm_config_viewer")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("man\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("npm_package_license")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ISC                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Package properties")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("npm_package_author_name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Ankit Jain\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("npm_package_name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("npm-tips-and-tricks   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Name of our package")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])])]),n("p",[s._v("我们还可以通过 "),n("code",[s._v("process.env.npm_package_name")]),s._v(" 和类似的其他变量在代码中访问上述 "),n("code",[s._v("env")]),s._v(" 变量。")]),s._v(" "),n("p",[n("strong",[s._v("在 package.json 中配置自己的变量")]),s._v("\n我们可以定义 "),n("code",[s._v("package.json")]),s._v(" 文件中的 "),n("code",[s._v("config")]),s._v(" ，来定义自己的变量作为带有 "),n("code",[s._v("npm_package_config_")]),s._v(" 前缀的 npm 环境变量，如下：")]),s._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"config"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"myvariable"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),n("p",[s._v("现在，让我们在 env 变量中进行检查：")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" npm_package_config_\n")])])]),n("p",[s._v("输出：")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("npm_package_config_myvariable")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Hello World\n")])])]),n("figure",[n("img",{staticClass:"md-image",attrs:{src:t(444),alt:""}}),n("figcaption",[s._v("章节配图")])]),s._v(" "),n("p",[n("strong",[s._v("定义我们的自定义脚本")]),s._v(" "),n("code",[s._v("npm run")]),s._v(" 命令会显示我们在 "),n("code",[s._v("package.json")]),s._v(" 文件中定义的所有脚本。")]),s._v(" "),n("p",[s._v("让我们在 "),n("code",[s._v("package.json")]),s._v(" 中添加一些自定义脚本：")]),s._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"start"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"echo-hello"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Hello\\""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"echo-helloworld"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Helloworld\\""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"echo-both"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run echo-hello && npm run echo-helloworld"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"echo-both-in-parallel"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run echo-hello & npm run echo-helloworld"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"echo-packagename"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo $npm_package_name"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"echo-myvariable"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo $npm_package_config_myvariable"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"echo-passargument"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run echo-packagename -- \\"hello\\""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"echo-pipedata"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cat ./package.json | jq .name > package-name.txt"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),n("p",[s._v("运行以下命令：")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run\n")])])]),n("p",[s._v("输出：")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm-tips-and-tricks (name of our package)")]),s._v("\n\nLifecycle scripts included "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" npm-tips-and-tricks:\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Error: no test specified"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nstart\nnode index.js\navailable via "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run-script"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("\necho-hello\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\necho-helloworld\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Helloworld"')]),s._v("\necho-both\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-hello "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-helloworld\necho-both-in-parallel\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-hello "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-helloworld\necho-packagename\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$npm_package_name")]),s._v("\n  echo-myvariable\n    "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$npm_package_config_myvariable")]),s._v("\necho-passargument\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-packagename -- "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v("\necho-pipedata\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" ./package.json "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq .name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" package-name.txt\n")])])]),n("p",[n("strong",[s._v("运行一个简单的 npm 脚本：")])]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-hello\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Output")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\nHello\n")])])]),n("p",[n("strong",[s._v("在单个 npm 脚本中运行多个脚本：")]),s._v("\n我们可以使用 "),n("code",[s._v("&&")]),s._v(" 运行多个脚本。这两个脚本都是连续运行的，即一个接一个地运行。")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-both\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Output")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-hello "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-helloworld\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" npm-tips-and-tricks@1.0.0 echo-hello\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\nHello\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" npm-tips-and-tricks@1.0.0 echo-helloworld\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Helloworld"')]),s._v("\nHelloworld\n")])])]),n("p",[s._v("我们还可以使用 "),n("code",[s._v("＆")]),s._v(" 并行运行多个脚本。")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-both-in-parallel\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Output")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-hello "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-helloworld\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" npm-tips-and-tricks@1.0.0 echo-hello\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" npm-tips-and-tricks@1.0.0 echo-helloworld\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Helloworld"')]),s._v("\nHello\nHelloworld\n")])])]),n("p",[n("strong",[s._v("在 npm 脚本中使用 npm 环境变量")])]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-packagename\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Output")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$npm_package_name")]),s._v("\nnpm-tips-and-tricks\n-------------\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-myvariable\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Output")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$npm_package_config_myvariable")]),s._v("\nHello World\n")])])]),n("p",[n("strong",[s._v("将参数传递给另一个 npm 脚本")]),s._v("\n我们可以使用 "),n("code",[s._v("--")]),s._v(" 将参数传递给 "),n("code",[s._v("npm")]),s._v(" 脚本。在下面的示例中，我们将 "),n("code",[s._v("hello")]),s._v(" 作为参数传递给 "),n("code",[s._v("echo-packagename")]),s._v(" 脚本。")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-passargument\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Output")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-packagename -- "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" npm-tips-and-tricks@1.0.0 echo-packagename\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$npm_package_name")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v("\nnpm-tips-and-tricks hello\n")])])]),n("p",[n("strong",[s._v("使用管道将数据从一个 npm 脚本传递到另一个脚本")])]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run echo-pipedata\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Output")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" ./package.json "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq .name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" package-name.txt\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Let's cat package-name.txt")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" package-name.txt\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Output")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm-tips-and-tricks"')]),s._v("\n")])])]),n("h2",{attrs:{id:"_6-快速导航到打包文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-快速导航到打包文档"}},[s._v("#")]),s._v(" 6.快速导航到打包文档")]),s._v(" "),n("p",[s._v("我们只需运行以下命令即可快速导航到任何 npm 软件包的文档：")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" docs "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nOR\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" home "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),n("p",[s._v("如果我们要检查任何未解决的问题或将任何错误归档到 npm 软件包，我们也可以通过运行以下命令导航到网站：")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" bug "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),n("p",[s._v("类似，"),n("code",[s._v("npm repo <package-name>")]),s._v(" 在浏览器中打开 GitHub repo 页面。")]),s._v(" "),n("h2",{attrs:{id:"_7-删除重复的包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-删除重复的包"}},[s._v("#")]),s._v(" 7. 删除重复的包")]),s._v(" "),n("p",[s._v("我们可以通过运行 "),n("code",[s._v("npm dedupe")]),s._v(" 命令删除重复的依赖项。它通过删除重复的程序包并在多个从属程序包之间有效地共享公共依赖项，简化了总体结构。这样就形成了一个平面且具有重复数据删除功能的树。")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" dedupe or "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" ddp\n")])])]),n("h2",{attrs:{id:"_8-扫描应用程序中的漏洞"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8-扫描应用程序中的漏洞"}},[s._v("#")]),s._v(" 8.扫描应用程序中的漏洞")]),s._v(" "),n("p",[s._v("我们可以运行 "),n("code",[s._v("npm audit")]),s._v(" 命令来扫描我们的项目中任何依赖项中的任何漏洞。它会以表格格式生成漂亮的输出并显示（我们也可以用 JSON 获取输出），如果其它包是多级/多依赖项，则其它包都依赖于此包。")]),s._v(" "),n("p",[n("code",[s._v("npm audit fix")]),s._v(" 会自动安装所有漏洞包的补丁版本(如果可用)")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" audit fix\n")])])]),n("h2",{attrs:{id:"_9-检查环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-检查环境"}},[s._v("#")]),s._v(" 9.检查环境")]),s._v(" "),n("p",[s._v("我们可以使用 "),n("code",[s._v("npm doctor")]),s._v(" 命令在我们的环境中运行多个检查，比如，我们的 npm CLI 是否有足够的权限来安装 javascript 包，它是否能够连接到 npm 注册表。它还检查 node 和 npm 版本，验证缓存是否有损坏的软件包。")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" doctor\n")])])]),n("figure",[n("img",{staticClass:"md-image",attrs:{src:t(445),alt:""}}),n("figcaption",[s._v("章节配图")])]),s._v(" "),n("h2",{attrs:{id:"_10-在本地测试你的软件包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_10-在本地测试你的软件包"}},[s._v("#")]),s._v(" 10.在本地测试你的软件包")]),s._v(" "),n("p",[s._v("NPM 提供了 "),n("code",[s._v("npm link")]),s._v(" 命令，以便我们可以迭代地工作和测试包。"),n("code",[s._v("NPM link")]),s._v("会在全局"),n("code",[s._v("npm modules")]),s._v("文件夹中创建一个指向我们测试包的符号链接，我们可以通过运行 "),n("code",[s._v("npm link <package name>")]),s._v(" 将这个包安装到我们的测试应用程序中，这将创建一个从全局安装的包到我们项目 "),n("code",[s._v("node_modules")]),s._v(" 目录的符号链接。它在测试本地包或使用本地 npm 包时非常有用。")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /test-package "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("package name is helloworld"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Global symlink created")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /application\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" helloworld         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Create symlink in node_modules")]),s._v("\n")])])]),n("h2",{attrs:{id:"_11-检查包是否过时"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_11-检查包是否过时"}},[s._v("#")]),s._v(" 11.检查包是否过时")]),s._v(" "),n("p",[s._v("我们可以使用 "),n("code",[s._v("npm outdated")]),s._v(" 命令来检查所有过时的 npm 软件包。它还显示了应为过时的软件包安装的最新版本。")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" outdated --long or "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" outdated -l\n")])])]),n("figure",[n("img",{staticClass:"md-image",attrs:{src:t(446),alt:""}}),n("figcaption",[s._v("章节配图")])]),s._v(" "),n("p",[s._v("我们还可以通过简单地运行以下命令来检查任何 npm 软件包的最新版本：")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Shows the package information")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" view "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" or "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("v")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Shows the latest version only")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("v")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" version\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Shows the list of all versions")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("v")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" versions\n")])])]),n("h2",{attrs:{id:"_12-列出所有已安装的软件包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_12-列出所有已安装的软件包"}},[s._v("#")]),s._v(" 12.列出所有已安装的软件包")]),s._v(" "),n("p",[s._v("通过运行 "),n("code",[s._v("npm list")]),s._v(" 命令，我们可以列出项目中安装的所有 npm 包。它将创建一个树结构，显示已安装的包及其依赖项。")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" list or "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n")])])]),n("figure",[n("img",{staticClass:"md-image",attrs:{src:t(447),alt:""}}),n("figcaption",[s._v("章节配图")])]),s._v(" "),n("p",[s._v("我们可以使用 "),n("code",[s._v("—depth")]),s._v(" 标志来限制搜索深度：")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" --depth"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),n("figure",[n("img",{staticClass:"md-image",attrs:{src:t(448),alt:""}}),n("figcaption",[s._v("章节配图")])]),s._v(" "),n("h2",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),n("p",[s._v("在本文中，我们了解了一些有用的 NPM 技巧和窍门，可用于提高开发效率。欢迎提出更多 NPM 小技巧。")]),s._v(" "),n("p",[s._v("本文翻译自："),n("a",{attrs:{href:"https://blog.bitsrc.io/npm-tips-and-tricks-24c5e9defea6%EF%BC%8C%E4%B8%8E%E5%8E%9F%E6%96%87%E7%95%A5%E6%9C%89%E6%94%B9%E5%8A%A8",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://blog.bitsrc.io/npm-tips-and-tricks-24c5e9defea6，与原文略有改动"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://mp.weixin.qq.com/s/ybxQO8HaggyAaw3WWWq5aw",target:"_blank",rel:"noopener noreferrer"}},[s._v("12 个提高 JavaScript 编码效率的 NPM 技巧"),n("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);